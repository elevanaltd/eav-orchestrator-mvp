
> eav-orchestrator-prototype@0.1.0 test
> vitest run


 RUN  v3.2.4 /Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp

stderr | src/lib/comments-rls-performance.test.ts > RLS Performance Optimization - TDD Phase > New Security Model - user_accessible_scripts View > admin should see all scripts in user_accessible_scripts view
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments Table Schema > admin should create threaded comment reply
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments-rls-performance.test.ts > RLS Performance Optimization - TDD Phase > New Security Model - user_accessible_scripts View > client should see only assigned scripts in view
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments Table Schema > admin should resolve comment with resolved_at and resolved_by
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments-rls-performance.test.ts > RLS Performance Optimization - TDD Phase > New Security Model - user_accessible_scripts View > unauthorized user should see no scripts in view
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments RLS Security - CONTRACT-DRIVEN-CORRECTION > admin should have full access to all comments
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

 ❯ src/components/TipTapEditor.script-status.test.tsx (10 tests | 10 failed) 10101ms
   × TipTapEditor - Script Status Selector (TDD REFACTOR Phase) > [RED] Status Dropdown - Rendering > should render status dropdown in editor header 1034ms
     → Unable to find a label with the text of: /workflow status/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
   × TipTapEditor - Script Status Selector (TDD REFACTOR Phase) > [RED] Status Dropdown - Rendering > should display current script status in dropdown 1010ms
     → Unable to find a label with the text of: /workflow status/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
   × TipTapEditor - Script Status Selector (TDD REFACTOR Phase) > [RED] Status Dropdown - Rendering > should show all four status options in dropdown 1010ms
     → Unable to find a label with the text of: /workflow status/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
   × TipTapEditor - Script Status Selector (TDD REFACTOR Phase) > [RED] Status Change - User Interaction > should allow user to change status from draft to in_review 1006ms
     → Unable to find a label with the text of: /workflow status/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
   × TipTapEditor - Script Status Selector (TDD REFACTOR Phase) > [RED] Status Change - User Interaction > should call updateScript with new status on change 1006ms
     → Unable to find a label with the text of: /workflow status/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
   × TipTapEditor - Script Status Selector (TDD REFACTOR Phase) > [RED] Optimistic UI Updates > should update status immediately in UI (optimistic) 1006ms
     → Unable to find a label with the text of: /workflow status/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
   × TipTapEditor - Script Status Selector (TDD REFACTOR Phase) > [RED] Optimistic UI Updates > should rollback status on API failure 1006ms
     → Unable to find a label with the text of: /workflow status/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
   × TipTapEditor - Script Status Selector (TDD REFACTOR Phase) > [RED] Database Persistence > should persist status changes to database 1005ms
     → Unable to find a label with the text of: /workflow status/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
   × TipTapEditor - Script Status Selector (TDD REFACTOR Phase) > [RED] Database Persistence > should debounce multiple rapid status changes 1010ms
     → Unable to find a label with the text of: /workflow status/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
   × TipTapEditor - Script Status Selector (TDD REFACTOR Phase) > [RED] Access Control > should allow all authenticated users to change status 1007ms
     → Unable to find a label with the text of: /workflow status/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Component Structure > should render the sidebar with correct layout
[INFO] 2025-10-07T02:29:16.984Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Component Structure > should render the sidebar with correct layout
[INFO] 2025-10-07T02:29:17.025Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Component Structure > should have a header with title
[INFO] 2025-10-07T02:29:17.026Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Component Structure > should have a header with title
[INFO] 2025-10-07T02:29:17.055Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Component Structure > should display filter controls
[INFO] 2025-10-07T02:29:17.055Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Component Structure > should display filter controls
[INFO] 2025-10-07T02:29:17.086Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Empty State > should show empty state when no comments
[INFO] 2025-10-07T02:29:17.087Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Empty State > should show empty state when no comments
[INFO] 2025-10-07T02:29:17.092Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Comment Display > should display comments in document order
[INFO] 2025-10-07T02:29:17.093Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Comment Display > should display comments in document order
[INFO] 2025-10-07T02:29:17.116Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Comment Display > should display comment metadata correctly
[INFO] 2025-10-07T02:29:17.117Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stderr | src/lib/comments-rls-performance.test.ts > RLS Performance Optimization - TDD Phase > Optimized RLS Policies - Single JOIN > should maintain security boundaries with optimized policies
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments RLS Security - CONTRACT-DRIVEN-CORRECTION > client user should read comments from their assigned project
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Comment Display > should display comment metadata correctly
[INFO] 2025-10-07T02:29:18.121Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Comment Display > should show threading hierarchy
[INFO] 2025-10-07T02:29:18.122Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Comment Display > should show threading hierarchy
[INFO] 2025-10-07T02:29:18.127Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Comment Display > should distinguish resolved vs open comments
[INFO] 2025-10-07T02:29:18.127Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Comment Display > should distinguish resolved vs open comments
[INFO] 2025-10-07T02:29:18.132Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Filter Functionality > should filter to show only open comments
[INFO] 2025-10-07T02:29:18.133Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stderr | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Filter Functionality > should filter to show only open comments
Warning: An update to CommentSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentSidebar (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/comments/CommentSidebar.tsx:19:3)
Warning: An update to CommentSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentSidebar (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/comments/CommentSidebar.tsx:19:3)
Warning: An update to CommentSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentSidebar (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/comments/CommentSidebar.tsx:19:3)

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Filter Functionality > should filter to show only open comments
[INFO] 2025-10-07T02:29:18.142Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Filter Functionality > should filter to show only resolved comments
[INFO] 2025-10-07T02:29:18.143Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stderr | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Filter Functionality > should filter to show only resolved comments
Warning: An update to CommentSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentSidebar (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/comments/CommentSidebar.tsx:19:3)
Warning: An update to CommentSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentSidebar (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/comments/CommentSidebar.tsx:19:3)
Warning: An update to CommentSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentSidebar (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/comments/CommentSidebar.tsx:19:3)

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Filter Functionality > should filter to show only resolved comments
[INFO] 2025-10-07T02:29:18.149Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Filter Functionality > should show all comments by default
[INFO] 2025-10-07T02:29:18.150Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Filter Functionality > should show all comments by default
[INFO] 2025-10-07T02:29:18.157Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Comment Creation > should show creation form when createComment prop is provided
[INFO] 2025-10-07T02:29:18.158Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Comment Creation > should show creation form when createComment prop is provided
[INFO] 2025-10-07T02:29:18.164Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Comment Creation > should not show creation form when createComment is null
[INFO] 2025-10-07T02:29:18.164Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stderr | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Comment Creation > should not show creation form when createComment is null
Warning: An update to CommentSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentSidebar (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/comments/CommentSidebar.tsx:19:3)
Warning: An update to CommentSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentSidebar (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/comments/CommentSidebar.tsx:19:3)
Warning: An update to CommentSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentSidebar (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/comments/CommentSidebar.tsx:19:3)

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Comment Creation > should not show creation form when createComment is null
[INFO] 2025-10-07T02:29:18.165Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Comment Creation > should call onCommentCreated when form is submitted
[INFO] 2025-10-07T02:29:18.165Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stderr | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Comment Creation > should call onCommentCreated when form is submitted
Warning: An update to CommentSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentSidebar (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/comments/CommentSidebar.tsx:19:3)
Warning: An update to CommentSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentSidebar (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/comments/CommentSidebar.tsx:19:3)
Warning: An update to CommentSidebar inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentSidebar (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/comments/CommentSidebar.tsx:19:3)

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Comment Creation > should call onCommentCreated when form is submitted
[INFO] 2025-10-07T02:29:18.171Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Threading Actions > should show reply button on comment cards
[INFO] 2025-10-07T02:29:18.172Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Threading Actions > should show reply button on comment cards
[INFO] 2025-10-07T02:29:18.217Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Threading Actions > should show resolve button for unresolved comments
[INFO] 2025-10-07T02:29:18.217Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Threading Actions > should show resolve button for unresolved comments
[INFO] 2025-10-07T02:29:18.259Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Threading Actions > should show reopen button for resolved comments
[INFO] 2025-10-07T02:29:18.260Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Threading Actions > should show reopen button for resolved comments
[INFO] 2025-10-07T02:29:18.301Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Loading States > should show loading state while fetching comments
[INFO] 2025-10-07T02:29:18.302Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Loading States > should show loading state while fetching comments
[INFO] 2025-10-07T02:29:18.307Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Error Handling > should show error state when comments fail to load
[INFO] 2025-10-07T02:29:18.307Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stderr | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Error Handling > should show error state when comments fail to load
[WARN] 2025-10-07T02:29:18.308Z Attempt 1/2 failed { error: [32m'Database error'[39m, attempt: [33m1[39m, willRetry: [33mtrue[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Error Handling > should show error state when comments fail to load
[DEBUG] 2025-10-07T02:29:18.308Z Waiting 929ms before retry attempt 2

stderr | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Error Handling > should show error state when comments fail to load
[WARN] 2025-10-07T02:29:19.239Z Attempt 2/2 failed { error: [32m'Database error'[39m, attempt: [33m2[39m, willRetry: [33mfalse[39m }

stderr | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Error Handling > should show error state when comments fail to load
[ERROR] 2025-10-07T02:29:19.239Z comment operations failed {
  error: [32m'Database error'[39m,
  errorCode: [32m'SERVER_ERROR'[39m,
  category: [32m'server'[39m,
  isRetryable: [33mtrue[39m
}
[ERROR] 2025-10-07T02:29:19.239Z Comment loading error { error: [32m'Database error'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Error Handling > should show error state when comments fail to load
[INFO] 2025-10-07T02:29:19.310Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Navigation Script Changes - Stale Data Prevention > should clear comments immediately when scriptId changes
[INFO] 2025-10-07T02:29:19.311Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Navigation Script Changes - Stale Data Prevention > should clear comments immediately when scriptId changes
[INFO] 2025-10-07T02:29:19.316Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }
[INFO] 2025-10-07T02:29:19.316Z User profile cache cleared { scriptId: [32m'script-2'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Navigation Script Changes - Stale Data Prevention > should clear comments immediately when scriptId changes
[INFO] 2025-10-07T02:29:19.320Z Unsubscribing from realtime channel { scriptId: [32m'script-2'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Navigation Script Changes - Stale Data Prevention > should show loading state during script transition
[INFO] 2025-10-07T02:29:19.320Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Navigation Script Changes - Stale Data Prevention > should show loading state during script transition
[INFO] 2025-10-07T02:29:19.323Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }
[INFO] 2025-10-07T02:29:19.323Z User profile cache cleared { scriptId: [32m'script-2'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Navigation Script Changes - Stale Data Prevention > should show loading state during script transition
[INFO] 2025-10-07T02:29:19.331Z Unsubscribing from realtime channel { scriptId: [32m'script-2'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Navigation Script Changes - Stale Data Prevention > should handle rapid script switching without stale data
[INFO] 2025-10-07T02:29:19.331Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Navigation Script Changes - Stale Data Prevention > should handle rapid script switching without stale data
[INFO] 2025-10-07T02:29:19.335Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }
[INFO] 2025-10-07T02:29:19.335Z User profile cache cleared { scriptId: [32m'script-2'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Navigation Script Changes - Stale Data Prevention > should handle rapid script switching without stale data
[INFO] 2025-10-07T02:29:19.335Z Unsubscribing from realtime channel { scriptId: [32m'script-2'[39m }
[INFO] 2025-10-07T02:29:19.335Z User profile cache cleared { scriptId: [32m'script-3'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Navigation Script Changes - Stale Data Prevention > should handle rapid script switching without stale data
[INFO] 2025-10-07T02:29:19.339Z Unsubscribing from realtime channel { scriptId: [32m'script-3'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Cleanup and Memory Safety > should handle unmount during async loading without errors
[INFO] 2025-10-07T02:29:19.340Z User profile cache cleared { scriptId: [32m'script-1'[39m }
[INFO] 2025-10-07T02:29:19.344Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Cleanup and Memory Safety > should not leak memory when rapidly mounting/unmounting
[INFO] 2025-10-07T02:29:19.357Z User profile cache cleared { scriptId: [32m'script-0'[39m }
[INFO] 2025-10-07T02:29:19.358Z Unsubscribing from realtime channel { scriptId: [32m'script-0'[39m }
[INFO] 2025-10-07T02:29:19.358Z User profile cache cleared { scriptId: [32m'script-1'[39m }
[INFO] 2025-10-07T02:29:19.358Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }
[INFO] 2025-10-07T02:29:19.359Z User profile cache cleared { scriptId: [32m'script-2'[39m }
[INFO] 2025-10-07T02:29:19.359Z Unsubscribing from realtime channel { scriptId: [32m'script-2'[39m }
[INFO] 2025-10-07T02:29:19.359Z User profile cache cleared { scriptId: [32m'script-3'[39m }
[INFO] 2025-10-07T02:29:19.359Z Unsubscribing from realtime channel { scriptId: [32m'script-3'[39m }
[INFO] 2025-10-07T02:29:19.360Z User profile cache cleared { scriptId: [32m'script-4'[39m }
[INFO] 2025-10-07T02:29:19.360Z Unsubscribing from realtime channel { scriptId: [32m'script-4'[39m }
[INFO] 2025-10-07T02:29:19.360Z User profile cache cleared { scriptId: [32m'script-5'[39m }
[INFO] 2025-10-07T02:29:19.360Z Unsubscribing from realtime channel { scriptId: [32m'script-5'[39m }
[INFO] 2025-10-07T02:29:19.360Z User profile cache cleared { scriptId: [32m'script-6'[39m }
[INFO] 2025-10-07T02:29:19.361Z Unsubscribing from realtime channel { scriptId: [32m'script-6'[39m }
[INFO] 2025-10-07T02:29:19.361Z User profile cache cleared { scriptId: [32m'script-7'[39m }
[INFO] 2025-10-07T02:29:19.361Z Unsubscribing from realtime channel { scriptId: [32m'script-7'[39m }
[INFO] 2025-10-07T02:29:19.361Z User profile cache cleared { scriptId: [32m'script-8'[39m }
[INFO] 2025-10-07T02:29:19.361Z Unsubscribing from realtime channel { scriptId: [32m'script-8'[39m }
[INFO] 2025-10-07T02:29:19.362Z User profile cache cleared { scriptId: [32m'script-9'[39m }
[INFO] 2025-10-07T02:29:19.362Z Unsubscribing from realtime channel { scriptId: [32m'script-9'[39m }

 ❯ src/components/comments/CommentSidebar.test.tsx (38 tests | 6 failed | 14 skipped) 2385ms
   ✓ CommentSidebar > Component Structure > should render the sidebar with correct layout 48ms
   ✓ CommentSidebar > Component Structure > should have a header with title 29ms
   ✓ CommentSidebar > Component Structure > should display filter controls 32ms
   ✓ CommentSidebar > Empty State > should show empty state when no comments 6ms
   ✓ CommentSidebar > Comment Display > should display comments in document order 23ms
   × CommentSidebar > Comment Display > should display comment metadata correctly 1006ms
     → Unable to find an element with the text: /user-1/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<aside[39m
      [33maria-label[39m=[32m"Comments Sidebar"[39m
      [33mclass[39m=[32m"comments-sidebar"[39m
      [33mrole[39m=[32m"complementary"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"comments-sticky-header"[39m
      [36m>[39m
        [36m<header[39m
          [33maria-label[39m=[32m"Comments Header"[39m
          [33mrole[39m=[32m"banner"[39m
        [36m>[39m
          [36m<h2>[39m
            [0mComments[0m
          [36m</h2>[39m
        [36m</header>[39m
        [36m<div[39m
          [33mclass[39m=[32m"comment-filters"[39m
        [36m>[39m
          [36m<button[39m
            [33maria-label[39m=[32m"All Comments"[39m
            [33mclass[39m=[32m"active"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mAll Comments[0m
          [36m</button>[39m
          [36m<button[39m
            [33maria-label[39m=[32m"Open Comments"[39m
            [33mclass[39m=[32m""[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mOpen Comments[0m
          [36m</button>[39m
          [36m<button[39m
            [33maria-label[39m=[32m"Resolved Comments"[39m
            [33mclass[39m=[32m""[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mResolved Comments[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"comments-list"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"comment-thread"[39m
        [36m>[39m
          [36m<article[39m
            [33mclass[39m=[32m"comment-card "[39m
            [33mdata-comment-id[39m=[32m"comment-1"[39m
            [33mrole[39m=[32m"article"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"comment-header"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-number-badge"[39m
              [36m>[39m
                [0m1[0m
              [36m</div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"comment-author"[39m
              [36m>[39m
                [0mTest User 1[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"comment-date"[39m
              [36m>[39m
                [0m9/29/2024[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"comment-content"[39m
            [36m>[39m
              [0mThis needs revision.[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"comment-actions"[39m
            [36m>[39m
              [36m<button[39m
                [33maria-label[39m=[32m"Reply"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
                [0mReply[0m
              [36m</button>[39m
              [36m<button[39m
                [33maria-label[39m=[32m"Resolve"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
                [0mResolve[0m
              [36m</button>[39m
              [36m<button[39m
                [33maria-label[39m=[32m"Edit"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
                [0mEdit[0m
              [36m</button>[39m
              [36m<button[39m
                [33maria-label[39m=[32m"Delete"[39m
                [33mclass[39m=[32m"delete-button"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
                [0mDelete[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</article>[39m
          [36m<div>[39m
            [36m<article[39m
              [33mclass[39m=[32m"comment-card comment-reply"[39m
              [33mrole[39m=[32m"article"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-header"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"comment-author"[39m
                [36m>[39m
                  [0mTest User 2[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"comment-date"[39m
                [36m>[39m
                  [0m9/29/2024[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-content"[39m
              [36m>[39m
                [0mI agree with this change.[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-actions"[39m
              [36m>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Reply"[39m
                  [33mtype[39m=[32m"button"[39m
                [36m>[39m
                  [0mReply[0m
                [36m</button>[39m
              [36m</div>[39m
            [36m</article>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"comment-thread"[39m
        [36m>[39m
          [36m<article[39m
            [33mclass[39m=[32m"comment-card comment-resolved"[39m
            [33mdata-comment-id[39m=[32m"comment-3"[39m
            [33mrole[39m=[32m"article"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"comment-header"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-number-badge"[39m
              [36m>[39m
                [0m2[0m
              [36m</div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"comment-author"[39m
              [36m>[39m
                [0mTest User 1[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"comment-date"[39m
              [36m>[39m
                [0m9/29/2024[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"comment-content"[39m
            [36m>[39m
              [0mFixed in new version.[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"comment-actions"[39m
            [36m>[39m
              [36m<button[39m
                [33maria-label[39m=[32m"Reply"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
                [0mReply[0m
              [36m</button>[39m
              [36m<button[39m
                [33maria-label[39m=[32m"Reopen"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
               ...

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<aside[39m
        [33maria-label[39m=[32m"Comments Sidebar"[39m
        [33mclass[39m=[32m"comments-sidebar"[39m
        [33mrole[39m=[32m"complementary"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"comments-sticky-header"[39m
        [36m>[39m
          [36m<header[39m
            [33maria-label[39m=[32m"Comments Header"[39m
            [33mrole[39m=[32m"banner"[39m
          [36m>[39m
            [36m<h2>[39m
              [0mComments[0m
            [36m</h2>[39m
          [36m</header>[39m
          [36m<div[39m
            [33mclass[39m=[32m"comment-filters"[39m
          [36m>[39m
            [36m<button[39m
              [33maria-label[39m=[32m"All Comments"[39m
              [33mclass[39m=[32m"active"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mAll Comments[0m
            [36m</button>[39m
            [36m<button[39m
              [33maria-label[39m=[32m"Open Comments"[39m
              [33mclass[39m=[32m""[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mOpen Comments[0m
            [36m</button>[39m
            [36m<button[39m
              [33maria-label[39m=[32m"Resolved Comments"[39m
              [33mclass[39m=[32m""[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mResolved Comments[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"comments-list"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"comment-thread"[39m
          [36m>[39m
            [36m<article[39m
              [33mclass[39m=[32m"comment-card "[39m
              [33mdata-comment-id[39m=[32m"comment-1"[39m
              [33mrole[39m=[32m"article"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"comment-number-badge"[39m
                [36m>[39m
                  [0m1[0m
                [36m</div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"comment-author"[39m
                [36m>[39m
                  [0mTest User 1[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"comment-date"[39m
                [36m>[39m
                  [0m9/29/2024[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-content"[39m
              [36m>[39m
                [0mThis needs revision.[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-actions"[39m
              [36m>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Reply"[39m
                  [33mtype[39m=[32m"button"[39m
                [36m>[39m
                  [0mReply[0m
                [36m</button>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Resolve"[39m
                  [33mtype[39m=[32m"button"[39m
                [36m>[39m
                  [0mResolve[0m
                [36m</button>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Edit"[39m
                  [33mtype[39m=[32m"button"[39m
                [36m>[39m
                  [0mEdit[0m
                [36m</button>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Delete"[39m
                  [33mclass[39m=[32m"delete-button"[39m
                  [33mtype[39m=[32m"button"[39m
                [36m>[39m
                  [0mDelete[0m
                [36m</button>[39m
              [36m</div>[39m
            [36m</article>[39m
            [36m<div>[39m
              [36m<article[39m
                [33mclass[39m=[32m"comment-card comment-reply"[39m
                [33mrole[39m=[32m"article"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"comment-header"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"comment-author"[39m
                  [36m>[39m
                    [0mTest User 2[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"comment-date"[39m
                  [36m>[39m
                    [0m9/29/2024[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"comment-content"[39m
                [36m>[39m
                  [0mI agree with this change.[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"comment-actions"[39m
                [36m>[39m
                  [36m<button[39m
                    [33maria-label[39m=[32m"Reply"[39m
                    [33mtype[39m=[32m"button"[39m
                  [36m>[39m
                    [0mReply[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</article>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"comment-thread"[39m
          [36m>[39m
            [36m<article[39m
              [33mclass[39m=[32m"comment-card comment-resolved"[39m
              [33mdata-comment-id[39m=[32m"comment-3"[39m
              [33mrole[39m=[32m"article"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"comment-number-badge"[39m
                [36m>[39m
                  [0m2[0m
                [36m</div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"comment-author"[39m
                [36m>[39m
                  [0mTest User 1[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"comment-date"[39m
                [36m>[39m
                  [0m9/29/2024[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-content"[39m
              [36m>[39m
                [0mFixed in new version.[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-actions"[39m
              [36m>[39m
      ...
   ✓ CommentSidebar > Comment Display > should show threading hierarchy 5ms
   ✓ CommentSidebar > Comment Display > should distinguish resolved vs open comments 5ms
   × CommentSidebar > Filter Functionality > should filter to show only open comments 11ms
     → Unable to find an accessible element with the role "button" and name `/open comments/i`

Here are the accessible roles:

  complementary:

  Name "Comments Sidebar":
  [36m<aside[39m
    [33maria-label[39m=[32m"Comments Sidebar"[39m
    [33mclass[39m=[32m"comments-sidebar"[39m
    [33mrole[39m=[32m"complementary"[39m
  [36m/>[39m

  --------------------------------------------------
  status:

  Name "Loading Comments":
  [36m<div[39m
    [33maria-label[39m=[32m"Loading Comments"[39m
    [33mrole[39m=[32m"status"[39m
  [36m/>[39m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<aside[39m
      [33maria-label[39m=[32m"Comments Sidebar"[39m
      [33mclass[39m=[32m"comments-sidebar"[39m
      [33mrole[39m=[32m"complementary"[39m
    [36m>[39m
      [36m<div[39m
        [33maria-label[39m=[32m"Loading Comments"[39m
        [33mrole[39m=[32m"status"[39m
      [36m>[39m
        [0mLoading comments...[0m
      [36m</div>[39m
    [36m</aside>[39m
  [36m</div>[39m
[36m</body>[39m
   × CommentSidebar > Filter Functionality > should filter to show only resolved comments 6ms
     → Unable to find an accessible element with the role "button" and name `/resolved comments/i`

Here are the accessible roles:

  complementary:

  Name "Comments Sidebar":
  [36m<aside[39m
    [33maria-label[39m=[32m"Comments Sidebar"[39m
    [33mclass[39m=[32m"comments-sidebar"[39m
    [33mrole[39m=[32m"complementary"[39m
  [36m/>[39m

  --------------------------------------------------
  status:

  Name "Loading Comments":
  [36m<div[39m
    [33maria-label[39m=[32m"Loading Comments"[39m
    [33mrole[39m=[32m"status"[39m
  [36m/>[39m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<aside[39m
      [33maria-label[39m=[32m"Comments Sidebar"[39m
      [33mclass[39m=[32m"comments-sidebar"[39m
      [33mrole[39m=[32m"complementary"[39m
    [36m>[39m
      [36m<div[39m
        [33maria-label[39m=[32m"Loading Comments"[39m
        [33mrole[39m=[32m"status"[39m
      [36m>[39m
        [0mLoading comments...[0m
      [36m</div>[39m
    [36m</aside>[39m
  [36m</div>[39m
[36m</body>[39m
   ✓ CommentSidebar > Filter Functionality > should show all comments by default 8ms
   × CommentSidebar > Comment Creation > should show creation form when createComment prop is provided 6ms
     → Unable to find an accessible element with the role "form" and name `/new comment/i`

Here are the accessible roles:

  complementary:

  Name "Comments Sidebar":
  [36m<aside[39m
    [33maria-label[39m=[32m"Comments Sidebar"[39m
    [33mclass[39m=[32m"comments-sidebar"[39m
    [33mrole[39m=[32m"complementary"[39m
  [36m/>[39m

  --------------------------------------------------
  status:

  Name "Loading Comments":
  [36m<div[39m
    [33maria-label[39m=[32m"Loading Comments"[39m
    [33mrole[39m=[32m"status"[39m
  [36m/>[39m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<aside[39m
      [33maria-label[39m=[32m"Comments Sidebar"[39m
      [33mclass[39m=[32m"comments-sidebar"[39m
      [33mrole[39m=[32m"complementary"[39m
    [36m>[39m
      [36m<div[39m
        [33maria-label[39m=[32m"Loading Comments"[39m
        [33mrole[39m=[32m"status"[39m
      [36m>[39m
        [0mLoading comments...[0m
      [36m</div>[39m
    [36m</aside>[39m
  [36m</div>[39m
[36m</body>[39m
   ✓ CommentSidebar > Comment Creation > should not show creation form when createComment is null 1ms
   × CommentSidebar > Comment Creation > should call onCommentCreated when form is submitted 6ms
     → Unable to find an accessible element with the role "textbox" and name `/comment text/i`

Here are the accessible roles:

  complementary:

  Name "Comments Sidebar":
  [36m<aside[39m
    [33maria-label[39m=[32m"Comments Sidebar"[39m
    [33mclass[39m=[32m"comments-sidebar"[39m
    [33mrole[39m=[32m"complementary"[39m
  [36m/>[39m

  --------------------------------------------------
  status:

  Name "Loading Comments":
  [36m<div[39m
    [33maria-label[39m=[32m"Loading Comments"[39m
    [33mrole[39m=[32m"status"[39m
  [36m/>[39m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<aside[39m
      [33maria-label[39m=[32m"Comments Sidebar"[39m
      [33mclass[39m=[32m"comments-sidebar"[39m
      [33mrole[39m=[32m"complementary"[39m
    [36m>[39m
      [36m<div[39m
        [33maria-label[39m=[32m"Loading Comments"[39m
        [33mrole[39m=[32m"status"[39m
      [36m>[39m
        [0mLoading comments...[0m
      [36m</div>[39m
    [36m</aside>[39m
  [36m</div>[39m
[36m</body>[39m
   ✓ CommentSidebar > Threading Actions > should show reply button on comment cards 45ms
   ✓ CommentSidebar > Threading Actions > should show resolve button for unresolved comments 43ms
   ✓ CommentSidebar > Threading Actions > should show reopen button for resolved comments 42ms
   ✓ CommentSidebar > Loading States > should show loading state while fetching comments 5ms
   × CommentSidebar > Error Handling > should show error state when comments fail to load 1004ms
     → Unable to find an element with the text: /error loading comments/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<aside[39m
      [33maria-label[39m=[32m"Comments Sidebar"[39m
      [33mclass[39m=[32m"comments-sidebar"[39m
      [33mrole[39m=[32m"complementary"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"comments-sticky-header"[39m
      [36m>[39m
        [36m<header[39m
          [33maria-label[39m=[32m"Comments Header"[39m
          [33mrole[39m=[32m"banner"[39m
        [36m>[39m
          [36m<h2>[39m
            [0mComments[0m
          [36m</h2>[39m
        [36m</header>[39m
        [36m<div[39m
          [33mclass[39m=[32m"inline-error"[39m
          [33mrole[39m=[32m"alert"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"error-content"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"error-icon-small"[39m
            [36m>[39m
              [0m⚠️[0m
            [36m</span>[39m
            [36m<span[39m
              [33mclass[39m=[32m"error-message-small"[39m
            [36m>[39m
              [0mServer error occurred. Please try again in a few moments.[0m
            [36m</span>[39m
            [36m<button[39m
              [33maria-label[39m=[32m"Dismiss error"[39m
              [33mclass[39m=[32m"error-dismiss"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0m×[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"comment-filters"[39m
        [36m>[39m
          [36m<button[39m
            [33maria-label[39m=[32m"All Comments"[39m
            [33mclass[39m=[32m"active"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mAll Comments[0m
          [36m</button>[39m
          [36m<button[39m
            [33maria-label[39m=[32m"Open Comments"[39m
            [33mclass[39m=[32m""[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mOpen Comments[0m
          [36m</button>[39m
          [36m<button[39m
            [33maria-label[39m=[32m"Resolved Comments"[39m
            [33mclass[39m=[32m""[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mResolved Comments[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"comments-list"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"empty-state"[39m
        [36m>[39m
          [36m<p>[39m
            [0mNo comments yet.[0m
          [36m</p>[39m
          [36m<p>[39m
            [0mSelect text to add a comment.[0m
          [36m</p>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</aside>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<aside[39m
        [33maria-label[39m=[32m"Comments Sidebar"[39m
        [33mclass[39m=[32m"comments-sidebar"[39m
        [33mrole[39m=[32m"complementary"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"comments-sticky-header"[39m
        [36m>[39m
          [36m<header[39m
            [33maria-label[39m=[32m"Comments Header"[39m
            [33mrole[39m=[32m"banner"[39m
          [36m>[39m
            [36m<h2>[39m
              [0mComments[0m
            [36m</h2>[39m
          [36m</header>[39m
          [36m<div[39m
            [33mclass[39m=[32m"inline-error"[39m
            [33mrole[39m=[32m"alert"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"error-content"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"error-icon-small"[39m
              [36m>[39m
                [0m⚠️[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"error-message-small"[39m
              [36m>[39m
                [0mServer error occurred. Please try again in a few moments.[0m
              [36m</span>[39m
              [36m<button[39m
                [33maria-label[39m=[32m"Dismiss error"[39m
                [33mclass[39m=[32m"error-dismiss"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
                [0m×[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"comment-filters"[39m
          [36m>[39m
            [36m<button[39m
              [33maria-label[39m=[32m"All Comments"[39m
              [33mclass[39m=[32m"active"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mAll Comments[0m
            [36m</button>[39m
            [36m<button[39m
              [33maria-label[39m=[32m"Open Comments"[39m
              [33mclass[39m=[32m""[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mOpen Comments[0m
            [36m</button>[39m
            [36m<button[39m
              [33maria-label[39m=[32m"Resolved Comments"[39m
              [33mclass[39m=[32m""[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mResolved Comments[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"comments-list"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"empty-state"[39m
          [36m>[39m
            [36m<p>[39m
              [0mNo comments yet.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mSelect text to add a comment.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</aside>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m...
   ↓ CommentSidebar > Reply Functionality - TDD (WILL FAIL - SKIPPED pending implementation) > should show reply form when reply button is clicked
   ↓ CommentSidebar > Reply Functionality - TDD (WILL FAIL - SKIPPED pending implementation) > should create reply comment with parent_comment_id set
   ↓ CommentSidebar > Reply Functionality - TDD (WILL FAIL - SKIPPED pending implementation) > should display nested replies under parent comment
   ↓ CommentSidebar > Reply Functionality - TDD (WILL FAIL - SKIPPED pending implementation) > should cancel reply form when cancel button is clicked
   ↓ CommentSidebar > Resolve Functionality - TDD (WILL FAIL - SKIPPED pending implementation) > should resolve comment when resolve button is clicked
   ↓ CommentSidebar > Resolve Functionality - TDD (WILL FAIL - SKIPPED pending implementation) > should show reopen button for resolved comments
   ↓ CommentSidebar > Resolve Functionality - TDD (WILL FAIL - SKIPPED pending implementation) > should unresolve comment when reopen button is clicked
   ↓ CommentSidebar > Resolve Functionality - TDD (WILL FAIL - SKIPPED pending implementation) > should update UI to show resolved state visually
   ↓ CommentSidebar > Delete Functionality - TDD (WILL FAIL - SKIPPED pending implementation) > should show delete button for comment author
   ↓ CommentSidebar > Delete Functionality - TDD (WILL FAIL - SKIPPED pending implementation) > should show confirmation dialog when delete button is clicked
   ↓ CommentSidebar > Delete Functionality - TDD (WILL FAIL - SKIPPED pending implementation) > should delete comment when confirmed
   ↓ CommentSidebar > Delete Functionality - TDD (WILL FAIL - SKIPPED pending implementation) > should not show delete button for other users comments
   ↓ CommentSidebar > Delete Functionality - TDD (WILL FAIL - SKIPPED pending implementation) > should cancel deletion when cancel button is clicked
   ↓ CommentSidebar > Delete Functionality - TDD (WILL FAIL - SKIPPED pending implementation) > should preserve thread integrity when parent is deleted
   ✓ CommentSidebar > Navigation Script Changes - Stale Data Prevention > should clear comments immediately when scriptId changes 9ms
   ✓ CommentSidebar > Navigation Script Changes - Stale Data Prevention > should show loading state during script transition 11ms
   ✓ CommentSidebar > Navigation Script Changes - Stale Data Prevention > should handle rapid script switching without stale data 8ms
   ✓ CommentSidebar > Cleanup and Memory Safety > should handle unmount during async loading without errors 18ms
   ✓ CommentSidebar > Cleanup and Memory Safety > should not leak memory when rapidly mounting/unmounting 5ms
stderr | src/components/ErrorBoundary.test.tsx > ErrorBoundary > Development vs Production > should hide sensitive details in production mode
[WARN] 2025-10-07T02:29:19.785Z Error reporting not implemented - would send to monitoring service {
  error: [32m'Internal server error: Database timeout'[39m,
  stack: [32m'Error: Internal server error: Database timeout\n'[39m +
    [32m'    at ThrowError (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/ErrorBoundary.test.tsx:19:11)\n'[39m +
    [32m'    at renderWithHooks (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/react-dom/cjs/react-dom.development.js:15486:18)\n'[39m +
    [32m'    at mountIndeterminateComponent (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/react-dom/cjs/react-dom.development.js:20103:13)\n'[39m +
    [32m'    at beginWork (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/react-dom/cjs/react-dom.development.js:21626:16)\n'[39m +
    [32m'    at beginWork$1 (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/react-dom/cjs/react-dom.development.js:27465:14)\n'[39m +
    [32m'    at performUnitOfWork (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/react-dom/cjs/react-dom.development.js:26599:12)\n'[39m +
    [32m'    at workLoopSync (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/react-dom/cjs/react-dom.development.js:26505:5)\n'[39m +
    [32m'    at renderRootSync (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/react-dom/cjs/react-dom.development.js:26473:7)\n'[39m +
    [32m'    at recoverFromConcurrentError (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/react-dom/cjs/react-dom.development.js:25889:20)\n'[39m +
    [32m'    at performConcurrentWorkOnRoot (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/react-dom/cjs/react-dom.development.js:25789:22)'[39m,
  componentStack: [32m'\n'[39m +
    [32m'    at ThrowError (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/ErrorBoundary.test.tsx:12:3)\n'[39m +
    [32m'    at ErrorBoundary (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/ErrorBoundary.tsx:12:5)'[39m
}

 ❯ src/components/ErrorBoundary.test.tsx (19 tests | 1 failed) 132ms
   ✓ ErrorBoundary > Error Isolation > should render children when no error occurs 10ms
   ✓ ErrorBoundary > Error Isolation > should catch component errors and show fallback UI 24ms
   ✓ ErrorBoundary > Error Isolation > should isolate errors to specific components without affecting siblings 7ms
   ✓ ErrorBoundary > Error Isolation > should show retry button when error occurs 28ms
   ✓ ErrorBoundary > Error Isolation > should allow component to recover after retry 18ms
   ✓ ErrorBoundary > Error Information > should display error message to user 3ms
   ✓ ErrorBoundary > Error Information > should show generic error message for security sensitive errors 3ms
   ✓ ErrorBoundary > Error Information > should provide error reporting mechanism 2ms
   ✓ ErrorBoundary > Development vs Production > should show detailed error info in development mode 4ms
   ✓ ErrorBoundary > Development vs Production > should hide sensitive details in production mode 3ms
   ✓ ErrorBoundary > Custom Fallback > should accept custom fallback component 1ms
   ✓ ErrorBoundary > Custom Fallback > should provide error info to custom fallback 8ms
   ✓ ErrorBoundary > Performance Impact > should not impact performance when no errors occur 1ms
   ✓ ErrorBoundary > Edge Cases > should handle errors in error boundary itself gracefully 3ms
   ✓ ErrorBoundary > Edge Cases > should handle null/undefined children 1ms
   × ErrorBoundary > Async Error Handling > should NOT display the fallback UI for async errors originating from useEffect 4ms
     → [2mexpect([22m[31melement[39m[2m).not.toBeInTheDocument()[22m

[31mexpected document not to contain element, found <h2
  style="margin: 0px; font-size: 18px; color: rgb(211, 47, 47);"
>
  Something went wrong
</h2> instead[39m
   ✓ ErrorBoundary > Clipboard Operations > should display failure message when clipboard API rejects 6ms
   ✓ ErrorBoundary > Clipboard Operations > should handle browsers without clipboard API gracefully 2ms
   ✓ ErrorBoundary > Clipboard Operations > should show success message only when clipboard write succeeds 4ms
 ❯ src/components/TipTapEditor.paste-handler.test.tsx (16 tests | 5 failed) 65ms
   ✓ TipTap Paste Handler - <br> Tag Preservation > sanitizes Google Docs HTML but preserves safe <br> tags 9ms
   ✓ TipTap Paste Handler - <br> Tag Preservation > sanitization modifies HTML but result is still valid 2ms
   ✓ TipTap Paste Handler - <br> Tag Preservation > sanitization changes do NOT mean content is dangerous 2ms
   ✓ TipTap Paste Handler - <br> Tag Preservation > empty or whitespace-only sanitized result should fallback to plain text 1ms
   ✓ TipTap Paste Handler - <br> Tag Preservation > large paste content should be limited to prevent UI freeze 0ms
   ✓ TipTap Paste Handler - Multi-Paragraph Component Extraction (TDD RED) > [RED] should split multi-paragraph Google Docs paste into separate paragraph nodes immediately 18ms
   ✓ TipTap Paste Handler - Multi-Paragraph Component Extraction (TDD RED) > [RED] should create separate components (C1, C2, C3) from multi-paragraph paste 4ms
   × TipTap Paste Handler - Multi-Paragraph Component Extraction (TDD RED) > [RED] should preserve component structure after editing middle component 8ms
     → expected 'Compone EDITEDnt two' to contain 'Component two'
   × TipTap Paste Handler - Multi-Paragraph Component Extraction (TDD RED) > [RED] should handle Google Docs paste with double newlines \n\n between paragraphs 3ms
     → expected 1 to be 3 // Object.is equality
   × TipTap Paste Handler - Multi-Paragraph Component Extraction (TDD RED) > [RED] should preserve component identity through multiple edits 3ms
     → expected 'C1 c EDIT1ontent' to contain 'C1 content'
   × TipTap Paste Handler - Multi-Paragraph Component Extraction (TDD RED) > [RED] should not merge adjacent components when editing between them 3ms
     → expected 'First componen more textt' to contain 'First component'
   × TipTap Paste Handler - Spacing Behavior (No Extra Empty Lines) > should NOT create empty paragraphs between content paragraphs 3ms
     → expected 2 to be +0 // Object.is equality
   ✓ TipTap Paste Handler - Spacing Behavior (No Extra Empty Lines) > should extract only content components (no empty components) 4ms
   ✓ TipTap Paste Handler - Spacing Behavior (No Extra Empty Lines) > should match main branch spacing behavior (no extra lines) 3ms
   ✓ TipTap Paste Handler - Spacing Behavior (No Extra Empty Lines) > should preserve content paragraph structure without whitespace artifacts 2ms
   ✓ TipTap Paste Handler - Spacing Behavior (No Extra Empty Lines) > should filter Google Docs &nbsp; paragraphs (ACTUAL ISSUE) 2ms
stderr | src/components/TipTapEditor.comments.test.tsx > TipTapEditor Comments - Phase 2.2 TDD > Text Selection Detection > should detect when text is selected in the editor
[ERROR] 2025-10-07T02:29:20.604Z Failed to load script {
  error: [32m'Input validation failed: Invalid video ID: Must be a valid SmartSuite ID (24-character hex string)'[39m
}
Error details: {
  message: [32m'Input validation failed: Invalid video ID: Must be a valid SmartSuite ID (24-character hex string)'[39m,
  code: [90mundefined[39m,
  details: [90mundefined[39m,
  status: [90mundefined[39m
}
Warning: An update to TipTapEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:129:95)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at div
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:20:26)
    at TestWrapper (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:102:24)
Warning: An update to TipTapEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:129:95)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at div
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:20:26)
    at TestWrapper (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:102:24)

stderr | src/components/TipTapEditor.comments.test.tsx > TipTapEditor Comments - Phase 2.2 TDD > Text Selection Detection > should show comment popup when text is selected
[ERROR] 2025-10-07T02:29:20.614Z Failed to load script {
  error: [32m'Input validation failed: Invalid video ID: Must be a valid SmartSuite ID (24-character hex string)'[39m
}
Error details: {
  message: [32m'Input validation failed: Invalid video ID: Must be a valid SmartSuite ID (24-character hex string)'[39m,
  code: [90mundefined[39m,
  details: [90mundefined[39m,
  status: [90mundefined[39m
}
Warning: An update to TipTapEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:129:95)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at div
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:20:26)
    at TestWrapper (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:102:24)
Warning: An update to TipTapEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:129:95)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at div
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:20:26)
    at TestWrapper (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:102:24)

stderr | src/components/TipTapEditor.comments.test.tsx > TipTapEditor Comments - Phase 2.2 TDD > Text Selection Detection > should hide comment popup when selection is cleared
[ERROR] 2025-10-07T02:29:20.618Z Failed to load script {
  error: [32m'Input validation failed: Invalid video ID: Must be a valid SmartSuite ID (24-character hex string)'[39m
}
Error details: {
  message: [32m'Input validation failed: Invalid video ID: Must be a valid SmartSuite ID (24-character hex string)'[39m,
  code: [90mundefined[39m,
  details: [90mundefined[39m,
  status: [90mundefined[39m
}
Warning: An update to TipTapEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:129:95)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at div
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:20:26)
    at TestWrapper (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:102:24)
Warning: An update to TipTapEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:129:95)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at div
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:20:26)
    at TestWrapper (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:102:24)

stderr | src/components/TipTapEditor.comments.test.tsx > TipTapEditor Comments - Phase 2.2 TDD > Comment Highlight Extension > should register CommentHighlightExtension with TipTap
[ERROR] 2025-10-07T02:29:20.621Z Failed to load script {
  error: [32m'Input validation failed: Invalid video ID: Must be a valid SmartSuite ID (24-character hex string)'[39m
}
Error details: {
  message: [32m'Input validation failed: Invalid video ID: Must be a valid SmartSuite ID (24-character hex string)'[39m,
  code: [90mundefined[39m,
  details: [90mundefined[39m,
  status: [90mundefined[39m
}
Warning: An update to TipTapEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:129:95)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at div
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:20:26)
    at TestWrapper (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:102:24)
Warning: An update to TipTapEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:129:95)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at div
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:20:26)
    at TestWrapper (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:102:24)

stderr | src/components/TipTapEditor.comments.test.tsx > TipTapEditor Comments - Phase 2.2 TDD > Comment Highlight Extension > should apply comment highlight marks to selected text
[ERROR] 2025-10-07T02:29:20.625Z Failed to load script {
  error: [32m'Input validation failed: Invalid video ID: Must be a valid SmartSuite ID (24-character hex string)'[39m
}
Error details: {
  message: [32m'Input validation failed: Invalid video ID: Must be a valid SmartSuite ID (24-character hex string)'[39m,
  code: [90mundefined[39m,
  details: [90mundefined[39m,
  status: [90mundefined[39m
}
Warning: An update to TipTapEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:129:95)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at div
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:20:26)
    at TestWrapper (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:102:24)
Warning: An update to TipTapEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:129:95)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at div
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:20:26)
    at TestWrapper (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:102:24)

stderr | src/components/TipTapEditor.comments.test.tsx > TipTapEditor Comments - Phase 2.2 TDD > Comment Position Tracking > should track character positions for comment anchoring
[ERROR] 2025-10-07T02:29:20.627Z Failed to load script {
  error: [32m'Input validation failed: Invalid video ID: Must be a valid SmartSuite ID (24-character hex string)'[39m
}
Error details: {
  message: [32m'Input validation failed: Invalid video ID: Must be a valid SmartSuite ID (24-character hex string)'[39m,
  code: [90mundefined[39m,
  details: [90mundefined[39m,
  status: [90mundefined[39m
}
Warning: An update to TipTapEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:129:95)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at div
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:20:26)
    at TestWrapper (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:102:24)
Warning: An update to TipTapEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:129:95)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at div
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:20:26)
    at TestWrapper (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:102:24)

stderr | src/components/TipTapEditor.comments.test.tsx > TipTapEditor Comments - Phase 2.2 TDD > Comment Position Tracking > should calculate correct character positions for selections
[ERROR] 2025-10-07T02:29:20.629Z Failed to load script {
  error: [32m'Input validation failed: Invalid video ID: Must be a valid SmartSuite ID (24-character hex string)'[39m
}
Error details: {
  message: [32m'Input validation failed: Invalid video ID: Must be a valid SmartSuite ID (24-character hex string)'[39m,
  code: [90mundefined[39m,
  details: [90mundefined[39m,
  status: [90mundefined[39m
}
Warning: An update to TipTapEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:129:95)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at div
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:20:26)
    at TestWrapper (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:102:24)
Warning: An update to TipTapEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:129:95)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at div
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:20:26)
    at TestWrapper (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:102:24)

stderr | src/components/TipTapEditor.comments.test.tsx > TipTapEditor Comments - Phase 2.2 TDD > Comment Data Integration > should prepare comment data for Supabase insertion
[ERROR] 2025-10-07T02:29:20.631Z Failed to load script {
  error: [32m'Input validation failed: Invalid video ID: Must be a valid SmartSuite ID (24-character hex string)'[39m
}
Error details: {
  message: [32m'Input validation failed: Invalid video ID: Must be a valid SmartSuite ID (24-character hex string)'[39m,
  code: [90mundefined[39m,
  details: [90mundefined[39m,
  status: [90mundefined[39m
}
Warning: An update to TipTapEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:129:95)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at div
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:20:26)
    at TestWrapper (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:102:24)
Warning: An update to TipTapEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:129:95)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at div
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:20:26)
    at TestWrapper (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:102:24)

stderr | src/components/TipTapEditor.comments.test.tsx > TipTapEditor Comments - Phase 2.2 TDD > UI Integration Requirements > should not show comment UI on mobile devices
[ERROR] 2025-10-07T02:29:20.634Z Failed to load script {
  error: [32m'Input validation failed: Invalid video ID: Must be a valid SmartSuite ID (24-character hex string)'[39m
}
Error details: {
  message: [32m'Input validation failed: Invalid video ID: Must be a valid SmartSuite ID (24-character hex string)'[39m,
  code: [90mundefined[39m,
  details: [90mundefined[39m,
  status: [90mundefined[39m
}
Warning: An update to TipTapEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:129:95)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at div
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:20:26)
    at TestWrapper (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:102:24)
Warning: An update to TipTapEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:129:95)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at div
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:20:26)
    at TestWrapper (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:102:24)

stderr | src/components/TipTapEditor.comments.test.tsx > TipTapEditor Comments - Phase 2.2 TDD > UI Integration Requirements > should integrate with existing script auto-save functionality
[ERROR] 2025-10-07T02:29:20.637Z Failed to load script {
  error: [32m'Input validation failed: Invalid video ID: Must be a valid SmartSuite ID (24-character hex string)'[39m
}
Error details: {
  message: [32m'Input validation failed: Invalid video ID: Must be a valid SmartSuite ID (24-character hex string)'[39m,
  code: [90mundefined[39m,
  details: [90mundefined[39m,
  status: [90mundefined[39m
}
Warning: An update to TipTapEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:129:95)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at div
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:20:26)
    at TestWrapper (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:102:24)
Warning: An update to TipTapEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:129:95)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at div
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:20:26)
    at TestWrapper (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.comments.test.tsx:102:24)

 ❯ src/components/TipTapEditor.comments.test.tsx (10 tests | 4 failed) 60ms
   × TipTapEditor Comments - Phase 2.2 TDD > Text Selection Detection > should detect when text is selected in the editor 33ms
     → Unable to find an element by: [data-testid="editor-content"]

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"editor-layout"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"main-editor"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"editor-header"[39m
          [36m>[39m
            [36m<div[39m
              [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
            [36m>[39m
              [36m<div>[39m
                [36m<h1[39m
                  [33mclass[39m=[32m"editor-title"[39m
                [36m>[39m
                  [0mScript: Test Video[0m
                [36m</h1>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"editor-subtitle"[39m
                [36m>[39m
                  [0mEach paragraph becomes a component (C1, C2, C3...) that flows through the production pipeline[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<button[39m
                [33mstyle[39m=[32m"background: rgb(59, 130, 246); color: white; border-radius: 6px; padding: 8px 16px; font-size: 14px; font-weight: 500; cursor: pointer; margin-top: 4px; transition: background-color 0.2s;"[39m
              [36m>[39m
                [0mConvert Soft Enters[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"editor-content"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"loading-placeholder"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"loading-spinner"[39m
              [36m/>[39m
              [36m<p>[39m
                [0mLoading script...[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
   × TipTapEditor Comments - Phase 2.2 TDD > Text Selection Detection > should show comment popup when text is selected 6ms
     → [2mexpect([22m[31mreceived[39m[2m).toBeInTheDocument()[22m

[31mreceived[39m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[39m
   ✓ TipTapEditor Comments - Phase 2.2 TDD > Text Selection Detection > should hide comment popup when selection is cleared 3ms
   ✓ TipTapEditor Comments - Phase 2.2 TDD > Comment Highlight Extension > should register CommentHighlightExtension with TipTap 3ms
   × TipTapEditor Comments - Phase 2.2 TDD > Comment Highlight Extension > should apply comment highlight marks to selected text 3ms
     → [2mexpect([22m[31mreceived[39m[2m).toBeInTheDocument()[22m

[31mreceived[39m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[39m
   × TipTapEditor Comments - Phase 2.2 TDD > Comment Position Tracking > should track character positions for comment anchoring 2ms
     → expected undefined to be defined
   ✓ TipTapEditor Comments - Phase 2.2 TDD > Comment Position Tracking > should calculate correct character positions for selections 2ms
   ✓ TipTapEditor Comments - Phase 2.2 TDD > Comment Data Integration > should prepare comment data for Supabase insertion 2ms
   ✓ TipTapEditor Comments - Phase 2.2 TDD > UI Integration Requirements > should not show comment UI on mobile devices 4ms
   ✓ TipTapEditor Comments - Phase 2.2 TDD > UI Integration Requirements > should integrate with existing script auto-save functionality 2ms
stderr | src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments RLS Security - CONTRACT-DRIVEN-CORRECTION > client user can create comments (TODO: should be read-only)
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments-rls-performance.test.ts > RLS Performance Optimization - TDD Phase > INSERT/UPDATE/DELETE Performance > should optimize INSERT operations with simplified policy
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments RLS Security - CONTRACT-DRIVEN-CORRECTION > unauthorized user should NOT see any comments
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments-rls-performance.test.ts > RLS Performance Optimization - TDD Phase > INSERT/UPDATE/DELETE Performance > should optimize UPDATE operations with simplified policy
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments RLS Security - CONTRACT-DRIVEN-CORRECTION > unauthorized user should NOT create comments
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments-rls-performance.test.ts > RLS Performance Optimization - TDD Phase > INSERT/UPDATE/DELETE Performance > should optimize DELETE operations with simplified policy
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

 ✓ src/utils/errorHandling.test.ts (30 tests) 7978ms
   ✓ Error Handling Utilities > withRetry > should give up after max attempts  847ms
   ✓ Error Handling Utilities > AsyncErrorBoundary > should return error result for failed operations  1974ms
   ✓ Error Handling Utilities > AsyncErrorBoundary > should call error handler when provided  2332ms
   ✓ Error Handling Utilities > useErrorHandling > should create AsyncErrorBoundary with correct operation name  2803ms
stderr | src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments Position Validation > should validate position bounds (negative positions)
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments-rls-performance.test.ts > RLS Performance Optimization - TDD Phase > Backward Compatibility > should maintain exact same security behavior as current system
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

 ✓ src/test/bundle-optimization.test.ts (3 tests) 3172ms
   ✓ Bundle Optimization Characterization > should create optimized vendor chunks for major dependencies  3170ms
stderr | src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments Position Validation > should validate start_position < end_position
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments-rls-performance.test.ts > RLS Performance Optimization - TDD Phase > Backward Compatibility > should not break existing application code
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

 ✓ src/test/security-updates.test.ts (5 tests) 1530ms
   ✓ Security Updates Characterization > should have no critical or high security vulnerabilities  605ms
   ✓ Security Updates Characterization > should maintain security posture across dependency changes  474ms
   ✓ Security Updates Characterization > should have proper npm audit configuration  449ms
 ✓ src/components/TipTapEditor.lifecycle.test.tsx (6 tests) 206ms
stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > Subscription Setup > should create a Realtime channel scoped to script_id on mount
[INFO] 2025-10-07T02:29:35.412Z User profile cache cleared { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > Subscription Setup > should create a Realtime channel scoped to script_id on mount
[INFO] 2025-10-07T02:29:35.421Z Unsubscribing from realtime channel { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > Subscription Setup > should subscribe to postgres_changes event for comments table
[INFO] 2025-10-07T02:29:35.422Z User profile cache cleared { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > Subscription Setup > should subscribe to postgres_changes event for comments table
[INFO] 2025-10-07T02:29:35.427Z Unsubscribing from realtime channel { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > Subscription Setup > should call subscribe() to activate the channel
[INFO] 2025-10-07T02:29:35.427Z User profile cache cleared { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > Subscription Setup > should call subscribe() to activate the channel
[INFO] 2025-10-07T02:29:35.430Z Unsubscribing from realtime channel { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > Subscription Setup > should unsubscribe from channel on unmount
[INFO] 2025-10-07T02:29:35.430Z User profile cache cleared { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > Subscription Setup > should unsubscribe from channel on unmount
[INFO] 2025-10-07T02:29:35.432Z Unsubscribing from realtime channel { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > Subscription Setup > should create new subscription when scriptId changes
[INFO] 2025-10-07T02:29:35.435Z User profile cache cleared { scriptId: [32m'script-1'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > Subscription Setup > should create new subscription when scriptId changes
[INFO] 2025-10-07T02:29:35.437Z Unsubscribing from realtime channel { scriptId: [32m'script-1'[39m }
[INFO] 2025-10-07T02:29:35.437Z User profile cache cleared { scriptId: [32m'script-2'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > Subscription Setup > should create new subscription when scriptId changes
[INFO] 2025-10-07T02:29:35.439Z Unsubscribing from realtime channel { scriptId: [32m'script-2'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > INSERT Event Handling > should add new comment to state when INSERT event received
[INFO] 2025-10-07T02:29:35.440Z User profile cache cleared { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > INSERT Event Handling > should add new comment to state when INSERT event received
[INFO] 2025-10-07T02:29:35.443Z Realtime comment added { commentId: [32m'new-comment-1'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > INSERT Event Handling > should add new comment to state when INSERT event received
[INFO] 2025-10-07T02:29:35.449Z Unsubscribing from realtime channel { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > INSERT Event Handling > should not add duplicate comments if INSERT event for existing comment
[INFO] 2025-10-07T02:29:35.449Z User profile cache cleared { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > INSERT Event Handling > should not add duplicate comments if INSERT event for existing comment
[INFO] 2025-10-07T02:29:35.456Z Realtime comment added { commentId: [32m'existing-1'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > INSERT Event Handling > should not add duplicate comments if INSERT event for existing comment
[INFO] 2025-10-07T02:29:35.498Z Unsubscribing from realtime channel { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > UPDATE Event Handling > should update existing comment when UPDATE event received
[INFO] 2025-10-07T02:29:35.499Z User profile cache cleared { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > UPDATE Event Handling > should update existing comment when UPDATE event received
[INFO] 2025-10-07T02:29:35.504Z Realtime comment updated { commentId: [32m'comment-1'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > UPDATE Event Handling > should update existing comment when UPDATE event received
[INFO] 2025-10-07T02:29:35.508Z Unsubscribing from realtime channel { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > UPDATE Event Handling > should update resolved status when comment is resolved via Realtime
[INFO] 2025-10-07T02:29:35.508Z User profile cache cleared { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > UPDATE Event Handling > should update resolved status when comment is resolved via Realtime
[INFO] 2025-10-07T02:29:35.512Z Realtime comment updated { commentId: [32m'comment-1'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > UPDATE Event Handling > should update resolved status when comment is resolved via Realtime
[INFO] 2025-10-07T02:29:35.515Z Unsubscribing from realtime channel { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > DELETE Event Handling > should remove comment from state when DELETE event received
[INFO] 2025-10-07T02:29:35.516Z User profile cache cleared { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > DELETE Event Handling > should remove comment from state when DELETE event received
[INFO] 2025-10-07T02:29:35.519Z Realtime comment deleted { commentId: [32m'comment-to-delete'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > DELETE Event Handling > should remove comment from state when DELETE event received
[INFO] 2025-10-07T02:29:35.522Z Unsubscribing from realtime channel { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > DELETE Event Handling > should not error if DELETE event for non-existent comment
[INFO] 2025-10-07T02:29:35.522Z User profile cache cleared { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > DELETE Event Handling > should not error if DELETE event for non-existent comment
[INFO] 2025-10-07T02:29:35.524Z Realtime comment deleted { commentId: [32m'non-existent-comment'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > DELETE Event Handling > should not error if DELETE event for non-existent comment
[INFO] 2025-10-07T02:29:35.526Z Unsubscribing from realtime channel { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > RLS Filtering (Automated) > should receive only comments for current script_id via RLS
[INFO] 2025-10-07T02:29:35.526Z User profile cache cleared { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > RLS Filtering (Automated) > should receive only comments for current script_id via RLS
[INFO] 2025-10-07T02:29:35.527Z Unsubscribing from realtime channel { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > Memory Safety and Cleanup > should not update state if component unmounts during subscription setup
[INFO] 2025-10-07T02:29:35.528Z User profile cache cleared { scriptId: [32m'script-123'[39m }

stdout | src/components/comments/CommentSidebar.realtime.test.tsx > CommentSidebar - Realtime Subscriptions (TDD RED Phase) > Memory Safety and Cleanup > should not update state if component unmounts during subscription setup
[INFO] 2025-10-07T02:29:35.529Z Unsubscribing from realtime channel { scriptId: [32m'script-123'[39m }

 ✓ src/components/comments/CommentSidebar.realtime.test.tsx (13 tests) 125ms
 ✓ src/components/navigation/NavigationSidebar.test.tsx (4 tests) 133ms
stderr | src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments Threading Behavior > admin should handle parent comment deletion gracefully (SET NULL)
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

 ✓ src/components/auth/Login.test.tsx (3 tests) 105ms
 ✓ src/components/Header.test.tsx (8 tests) 86ms
 ❯ src/lib/comments-rls-performance.test.ts (13 tests | 10 failed | 3 skipped) 30605ms
   × RLS Performance Optimization - TDD Phase > New Security Model - user_accessible_scripts View > should have user_accessible_scripts view (WILL FAIL - not implemented) 2518ms
     → Invalid login credentials
   × RLS Performance Optimization - TDD Phase > New Security Model - user_accessible_scripts View > admin should see all scripts in user_accessible_scripts view 3007ms
     → Invalid login credentials
   × RLS Performance Optimization - TDD Phase > New Security Model - user_accessible_scripts View > client should see only assigned scripts in view 3013ms
     → Invalid login credentials
   × RLS Performance Optimization - TDD Phase > New Security Model - user_accessible_scripts View > unauthorized user should see no scripts in view 3007ms
     → Invalid login credentials
   ↓ RLS Performance Optimization - TDD Phase > Optimized RLS Policies - Single JOIN > should use single JOIN to user_accessible_scripts (WILL FAIL - not implemented - SKIPPED future optimization)
   × RLS Performance Optimization - TDD Phase > Optimized RLS Policies - Single JOIN > should maintain security boundaries with optimized policies 3008ms
     → Invalid login credentials
   ↓ RLS Performance Optimization - TDD Phase > Performance Benchmark - Before vs After > should achieve 30%+ performance improvement with optimized RLS
   ↓ RLS Performance Optimization - TDD Phase > Performance Benchmark - Before vs After > should maintain performance improvement under load (50 comments)
   × RLS Performance Optimization - TDD Phase > INSERT/UPDATE/DELETE Performance > should optimize INSERT operations with simplified policy 3015ms
     → Invalid login credentials
   × RLS Performance Optimization - TDD Phase > INSERT/UPDATE/DELETE Performance > should optimize UPDATE operations with simplified policy 3014ms
     → Invalid login credentials
   × RLS Performance Optimization - TDD Phase > INSERT/UPDATE/DELETE Performance > should optimize DELETE operations with simplified policy 3006ms
     → Invalid login credentials
   × RLS Performance Optimization - TDD Phase > Backward Compatibility > should maintain exact same security behavior as current system 3006ms
     → Invalid login credentials
   × RLS Performance Optimization - TDD Phase > Backward Compatibility > should not break existing application code 3007ms
     → Invalid login credentials
 ✓ src/components/extensions/CommentHighlightExtension.test.ts (20 tests) 75ms
 ✓ src/components/extensions/CommentPositionTracker.test.ts (17 tests) 62ms
 ✓ src/components/TipTapEditor.security.test.tsx (12 tests) 55ms
 ✓ src/test/console-cleanup.test.tsx (4 tests) 41ms
stderr | src/lib/rls-security.test.ts > Junction Table Integrity > should track who granted access and when
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

 ✓ src/lib/rls-security.test.ts (18 tests | 16 skipped) 36ms
 ✓ src/contexts/ScriptStatusContext.test.tsx (5 tests) 33ms
 ✓ src/components/ScriptStatusIndicator.test.tsx (2 tests) 29ms
stderr | src/components/TipTapEditor.test.tsx > TipTapEditor with Navigation > should render with navigation integration
Error: Uncaught [TypeError: editor.setEditable is not a function]
    at reportException (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at reportUncaughtErrorInDEV (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/react-dom/cjs/react-dom.development.js:22877:5)
    at captureCommitPhaseError (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/react-dom/cjs/react-dom.development.js:27165:5) TypeError: editor.setEditable is not a function
    at [90m/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/[39msrc/components/TipTapEditor.tsx:837:14
    at commitHookEffectListMount [90m(/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:27023:14[90m)[39m
    at [90m/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:26808:9
    at flushActQueue [90m(/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/[39mnode_modules/[4mreact[24m/cjs/react.development.js:2667:24[90m)[39m
The above error occurred in the <TipTapEditor> component:

    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:128:69)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/NavigationContext.tsx:8:31)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | src/components/TipTapEditor.test.tsx > TipTapEditor with Navigation > should show "Select a video to edit" when no video selected
Error: Uncaught [TypeError: editor.setEditable is not a function]
    at reportException (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at reportUncaughtErrorInDEV (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/react-dom/cjs/react-dom.development.js:22877:5)
    at captureCommitPhaseError (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/node_modules/react-dom/cjs/react-dom.development.js:27165:5) TypeError: editor.setEditable is not a function
    at [90m/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/[39msrc/components/TipTapEditor.tsx:837:14
    at commitHookEffectListMount [90m(/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:27023:14[90m)[39m
    at [90m/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom.development.js:26808:9
    at flushActQueue [90m(/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/[39mnode_modules/[4mreact[24m/cjs/react.development.js:2667:24[90m)[39m
The above error occurred in the <TipTapEditor> component:

    at TipTapEditor (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/components/TipTapEditor.tsx:128:69)
    at ScriptStatusProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/ScriptStatusContext.tsx:8:33)
    at NavigationProvider (/Volumes/HestAI-Projects/eav-orchestrator-mvp/eav-orchestrator-mvp/src/contexts/NavigationContext.tsx:8:31)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

 ❯ src/components/TipTapEditor.test.tsx (2 tests | 2 failed) 25ms
   × TipTapEditor with Navigation > should render with navigation integration 20ms
     → editor.setEditable is not a function
   × TipTapEditor with Navigation > should show "Select a video to edit" when no video selected 4ms
     → editor.setEditable is not a function
 ✓ src/contexts/AuthContext.test.tsx (2 tests) 23ms
 ✓ src/App.test.tsx (1 test) 21ms
stderr | src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments Performance Indexes > admin should efficiently query comments by script_id
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

 ✓ src/components/auth/PrivateRoute.test.tsx (3 tests) 16ms
 ✓ src/hooks/usePermissions.test.ts (17 tests) 15ms
 ✓ src/lib/supabase.test.ts (2 tests) 17ms
 ✓ src/hooks/useCommentPositionSync.test.ts (6 tests) 12ms
 ✓ src/lib/validation.test.ts (16 tests) 13ms
 ✓ src/test/App.test.tsx (2 tests) 12ms
 ✓ src/lib/comments-position-recovery.test.ts (23 tests) 12ms
 ✓ src/utils/errorHandling.stability.test.ts (4 tests) 9ms
 ✓ src/services/logger.test.ts (7 tests) 4ms
stderr | src/lib/smartsuite-data.test.ts > SmartSuiteData > fetchProjects > should throw error when fetch fails
Error fetching projects: { message: [32m'Database error'[39m }

 ✓ src/lib/smartsuite-data.test.ts (7 tests) 4ms
 ✓ src/utils/mobileDetection.test.ts (12 tests) 2ms
 ✓ .archive/mobile-experiment-backup/mobileDetection.test.ts (12 tests) 2ms
 ✓ src/services/scriptService.test.ts (4 tests) 1ms
 ✓ src/lib/comments-position-fix.test.ts (5 tests) 2ms
 ✓ src/components/comments/CommentSidebar.reconnection.test.tsx (1 test) 1ms
 ✓ src/types/comments.test.ts (2 tests) 1ms
 ✓ src/components/comments/CommentSidebar.cache.test.tsx (2 tests | 1 skipped) 1ms
 ↓ src/components/comments/CommentSidebar.error-handling.test.tsx (19 tests | 19 skipped)
stderr | src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments Performance Indexes > admin should efficiently filter by resolved status
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > getComments Performance - N+1 Query Fix > should fetch all user profiles in single query, not N+1 queries
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

 ❯ src/components/comments/CommentSidebar.connection-state.test.tsx (11 tests | 8 failed) 40086ms
   ✓ CommentSidebar - Connection State Machine > Connection State Transitions > should transition from connected → reconnecting on TIMED_OUT 40ms
   ✓ CommentSidebar - Connection State Machine > Connection State Transitions > should transition from connected → reconnecting on CHANNEL_ERROR 11ms
   ✓ CommentSidebar - Connection State Machine > Connection State Transitions > should transition from reconnecting → connected on successful reconnect 13ms
   × CommentSidebar - Connection State Machine > Connection State Transitions > should transition to degraded after 4 failed reconnection attempts 5006ms
     → Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   × CommentSidebar - Connection State Machine > UI Preservation During Reconnection > should preserve comments UI during reconnecting state 5004ms
     → Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   × CommentSidebar - Connection State Machine > UI Preservation During Reconnection > should NOT show destructive error state during reconnection 5003ms
     → Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   × CommentSidebar - Connection State Machine > Action Button State Management > should disable action buttons when connectionStatus !== "connected" 5002ms
     → Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   × CommentSidebar - Connection State Machine > Action Button State Management > should re-enable action buttons when returning to connected state 5001ms
     → Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   × CommentSidebar - Connection State Machine > Status Banner Visibility > should show "Reconnecting..." banner when connectionStatus is "reconnecting" 5001ms
     → Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   × CommentSidebar - Connection State Machine > Status Banner Visibility > should show "Connection degraded" banner when connectionStatus is "degraded" 5002ms
     → Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
   × CommentSidebar - Connection State Machine > Status Banner Visibility > should hide banner when connectionStatus is "connected" 5002ms
     → Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ↓ src/components/navigation/NavigationSidebar.race-condition.test.tsx (8 tests | 8 skipped)
stderr | src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > getComments Performance - N+1 Query Fix > should complete getComments for 50 comments in <200ms
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > getComments Performance - N+1 Query Fix > should handle mixed users efficiently with single profile query
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > createComment Function - TDD (WILL FAIL) > should create comment and return CommentWithUser type
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > createComment Function - TDD (WILL FAIL) > should validate required fields and return error
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > getComments Function - TDD (WILL FAIL) > should fetch comments with user info and threading
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > getComments Function - TDD (WILL FAIL) > should filter comments by resolved status
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > updateComment Function - TDD (WILL FAIL) > should update comment content and return updated comment
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > updateComment Function - TDD (WILL FAIL) > should resolve comment with timestamp and user
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > deleteComment Function - TDD (WILL FAIL) > should soft delete comment (mark as deleted)
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > POSITION DRIFT PERSISTENCE - TDD (RED PHASE) > should persist highlightedText when creating comment
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > POSITION DRIFT PERSISTENCE - TDD (RED PHASE) > should persist recovered positions after position recovery
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > CASCADE SOFT DELETE - TDD (WILL FAIL) > should cascade delete parent with one child
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > CASCADE SOFT DELETE - TDD (WILL FAIL) > should cascade delete parent with multiple children
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > CASCADE SOFT DELETE - TDD (WILL FAIL) > should cascade delete nested descendants (3+ levels)
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > CASCADE SOFT DELETE - TDD (WILL FAIL) > should only delete target comment when no children exist
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > CASCADE SOFT DELETE - TDD (WILL FAIL) > should handle deep nesting (5+ levels) efficiently
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stderr | src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > CASCADE SOFT DELETE - TDD (WILL FAIL) > should maintain transaction atomicity - all or nothing
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

 ❯ src/lib/comments.test.ts (31 tests | 31 failed) 77733ms
   × Comments Infrastructure - Integration Tests > Comments Table Schema > admin should create comment with required fields 2518ms
     → Invalid login credentials
   × Comments Infrastructure - Integration Tests > Comments Table Schema > admin should create threaded comment reply 3005ms
     → Invalid login credentials
   × Comments Infrastructure - Integration Tests > Comments Table Schema > admin should resolve comment with resolved_at and resolved_by 3013ms
     → Invalid login credentials
   × Comments Infrastructure - Integration Tests > Comments RLS Security - CONTRACT-DRIVEN-CORRECTION > admin should have full access to all comments 3008ms
     → Invalid login credentials
   × Comments Infrastructure - Integration Tests > Comments RLS Security - CONTRACT-DRIVEN-CORRECTION > client user should read comments from their assigned project 3011ms
     → Invalid login credentials
   × Comments Infrastructure - Integration Tests > Comments RLS Security - CONTRACT-DRIVEN-CORRECTION > client user can create comments (TODO: should be read-only) 3006ms
     → Invalid login credentials
   × Comments Infrastructure - Integration Tests > Comments RLS Security - CONTRACT-DRIVEN-CORRECTION > unauthorized user should NOT see any comments 3017ms
     → Invalid login credentials
   × Comments Infrastructure - Integration Tests > Comments RLS Security - CONTRACT-DRIVEN-CORRECTION > unauthorized user should NOT create comments 3004ms
     → Invalid login credentials
   × Comments Infrastructure - Integration Tests > Comments Position Validation > should validate position bounds (negative positions) 3006ms
     → Invalid login credentials
   × Comments Infrastructure - Integration Tests > Comments Position Validation > should validate start_position < end_position 3011ms
     → Invalid login credentials
   × Comments Infrastructure - Integration Tests > Comments Threading Behavior > admin should handle parent comment deletion gracefully (SET NULL) 3009ms
     → Invalid login credentials
   × Comments Infrastructure - Integration Tests > Comments Performance Indexes > admin should efficiently query comments by script_id 3007ms
     → Invalid login credentials
   × Comments Infrastructure - Integration Tests > Comments Performance Indexes > admin should efficiently filter by resolved status 3011ms
     → Invalid login credentials
   × Comments Infrastructure - Integration Tests > getComments Performance - N+1 Query Fix > should fetch all user profiles in single query, not N+1 queries 3003ms
     → Invalid login credentials
   × Comments Infrastructure - Integration Tests > getComments Performance - N+1 Query Fix > should complete getComments for 50 comments in <200ms 3008ms
     → Invalid login credentials
   × Comments Infrastructure - Integration Tests > getComments Performance - N+1 Query Fix > should handle mixed users efficiently with single profile query 3010ms
     → Invalid login credentials
   × Comments CRUD Functions - TDD Phase > createComment Function - TDD (WILL FAIL) > should create comment and return CommentWithUser type 2002ms
     → Invalid login credentials
   × Comments CRUD Functions - TDD Phase > createComment Function - TDD (WILL FAIL) > should validate required fields and return error 2007ms
     → Invalid login credentials
   × Comments CRUD Functions - TDD Phase > getComments Function - TDD (WILL FAIL) > should fetch comments with user info and threading 2003ms
     → Invalid login credentials
   × Comments CRUD Functions - TDD Phase > getComments Function - TDD (WILL FAIL) > should filter comments by resolved status 2006ms
     → Invalid login credentials
   × Comments CRUD Functions - TDD Phase > updateComment Function - TDD (WILL FAIL) > should update comment content and return updated comment 2006ms
     → Invalid login credentials
   × Comments CRUD Functions - TDD Phase > updateComment Function - TDD (WILL FAIL) > should resolve comment with timestamp and user 2007ms
     → Invalid login credentials
   × Comments CRUD Functions - TDD Phase > deleteComment Function - TDD (WILL FAIL) > should soft delete comment (mark as deleted) 2008ms
     → Invalid login credentials
   × Comments CRUD Functions - TDD Phase > POSITION DRIFT PERSISTENCE - TDD (RED PHASE) > should persist highlightedText when creating comment 2005ms
     → Invalid login credentials
   × Comments CRUD Functions - TDD Phase > POSITION DRIFT PERSISTENCE - TDD (RED PHASE) > should persist recovered positions after position recovery 2002ms
     → Invalid login credentials
   × Comments CRUD Functions - TDD Phase > CASCADE SOFT DELETE - TDD (WILL FAIL) > should cascade delete parent with one child 2009ms
     → Invalid login credentials
   × Comments CRUD Functions - TDD Phase > CASCADE SOFT DELETE - TDD (WILL FAIL) > should cascade delete parent with multiple children 2005ms
     → Invalid login credentials
   × Comments CRUD Functions - TDD Phase > CASCADE SOFT DELETE - TDD (WILL FAIL) > should cascade delete nested descendants (3+ levels) 2004ms
     → Invalid login credentials
   × Comments CRUD Functions - TDD Phase > CASCADE SOFT DELETE - TDD (WILL FAIL) > should only delete target comment when no children exist 2006ms
     → Invalid login credentials
   × Comments CRUD Functions - TDD Phase > CASCADE SOFT DELETE - TDD (WILL FAIL) > should handle deep nesting (5+ levels) efficiently 2006ms
     → Invalid login credentials
   × Comments CRUD Functions - TDD Phase > CASCADE SOFT DELETE - TDD (WILL FAIL) > should maintain transaction atomicity - all or nothing 2006ms
     → Invalid login credentials
 ❯ src/components/DesktopRequired.test.tsx (8 tests | 1 failed) 41ms
   ✓ DesktopRequired > Professional Mobile Fallback > should render desktop required message 9ms
   ✓ DesktopRequired > Professional Mobile Fallback > should explain why desktop is required 2ms
   ✓ DesktopRequired > Professional Mobile Fallback > should show access options 2ms
   × DesktopRequired > Professional Mobile Fallback > should have professional styling and layout 17ms
     → Unable to find an element with the role "img"

Here are the available roles:

  heading:

  Name "Desktop Required":
  [36m<h1[39m
    [33mclass[39m=[32m"desktop-required-title"[39m
  [36m/>[39m

  Name "Why Desktop?":
  [36m<h2 />[39m

  Name "Access Options":
  [36m<h2 />[39m

  Name "🖥️ Desktop Computer":
  [36m<h3 />[39m

  Name "💻 Laptop":
  [36m<h3 />[39m

  Name "📱 Mobile (Limited)":
  [36m<h3 />[39m

  --------------------------------------------------
  list:

  Name "":
  [36m<ul />[39m

  --------------------------------------------------
  listitem:

  Name "":
  [36m<li />[39m

  Name "":
  [36m<li />[39m

  Name "":
  [36m<li />[39m

  Name "":
  [36m<li />[39m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"desktop-required"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"desktop-required-container"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"desktop-required-icon"[39m
        [36m>[39m
          [36m<svg[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"64"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"64"[39m
          [36m>[39m
            [36m<rect[39m
              [33mheight[39m=[32m"14"[39m
              [33mrx[39m=[32m"2"[39m
              [33mry[39m=[32m"2"[39m
              [33mwidth[39m=[32m"20"[39m
              [33mx[39m=[32m"2"[39m
              [33my[39m=[32m"3"[39m
            [36m/>[39m
            [36m<line[39m
              [33mx1[39m=[32m"8"[39m
              [33mx2[39m=[32m"16"[39m
              [33my1[39m=[32m"21"[39m
              [33my2[39m=[32m"21"[39m
            [36m/>[39m
            [36m<line[39m
              [33mx1[39m=[32m"12"[39m
              [33mx2[39m=[32m"12"[39m
              [33my1[39m=[32m"17"[39m
              [33my2[39m=[32m"21"[39m
            [36m/>[39m
          [36m</svg>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"desktop-required-content"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"desktop-required-title"[39m
          [36m>[39m
            [0mDesktop Required[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"desktop-required-description"[39m
          [36m>[39m
            [0mEAV Orchestrator is designed for video production workflows that require precision editing, multiple tabs, and collaborative features best experienced on desktop and laptop computers.[0m
          [36m</p>[39m
          [36m<div[39m
            [33mclass[39m=[32m"desktop-required-features"[39m
          [36m>[39m
            [36m<h2>[39m
              [0mWhy Desktop?[0m
            [36m</h2>[39m
            [36m<ul>[39m
              [36m<li>[39m
                [36m<strong>[39m
                  [0mRich Text Editing:[0m
                [36m</strong>[39m
                [0m Advanced paragraph-component editing with TipTap[0m
              [36m</li>[39m
              [36m<li>[39m
                [36m<strong>[39m
                  [0mMulti-Tab Workflow:[0m
                [36m</strong>[39m
                [0m Script → Review → Scenes → Voice → Edit phases[0m
              [36m</li>[39m
              [36m<li>[39m
                [36m<strong>[39m
                  [0mCollaborative Comments:[0m
                [36m</strong>[39m
                [0m Google Docs-like review system[0m
              [36m</li>[39m
              [36m<li>[39m
                [36m<strong>[39m
                  [0mProfessional Tools:[0m
                [36m</strong>[39m
                [0m Optimized for video production teams[0m
              [36m</li>[39m
            [36m</ul>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"desktop-required-instructions"[39m
          [36m>[39m
            [36m<h2>[39m
              [0mAccess Options[0m
            [36m</h2>[39m
            [36m<div[39m
              [33mclass[39m=[32m"access-options"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"access-option"[39m
              [36m>[39m
                [36m<h3>[39m
                  [0m🖥️ Desktop Computer[0m
                [36m</h3>[39m
                [36m<p>[39m
                  [0mFull feature access with optimal performance[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"access-option"[39m
              [36m>[39m
                [36m<h3>[39m
                  [0m💻 Laptop[0m
                [36m</h3>[39m
                [36m<p>[39m
                  [0mComplete workflow support with portable convenience[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"access-option"[39m
              [36m>[39m
                [36m<h3>[39m
                  [0m📱 Mobile (Limited)[0m
                [36m</h3>[39m
                [36m<p>[39m
                  [0mView-only access for reviewing scripts and comments[0m
                [36m</p>[39m
                [36m<small>[39m
                  [0mFeature in development[0m
                [36m</small>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"desktop-required-footer"[39m
          [36m>[39m
            [36m<p>[39m
              [0mThank you for choosing EAV Orchestrator for your video production workflow.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
   ✓ DesktopRequired > Professional Mobile Fallback > should mention future mobile features 3ms
   ✓ DesktopRequired > Professional Mobile Fallback > should have professional footer message 1ms
   ✓ DesktopRequired > Accessibility > should have proper heading hierarchy 4ms
   ✓ DesktopRequired > Accessibility > should have descriptive content for screen readers 2ms

⎯⎯⎯⎯⎯⎯ Failed Suites 2 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  src/components/TipTapEditor.soft-hard-enters.test.tsx [ src/components/TipTapEditor.soft-hard-enters.test.tsx ]
Error: [vitest] No "PluginKey" export is defined on the "@tiptap/pm/state" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi[33m.[39m[34mmock[39m([35mimport[39m([32m"@tiptap/pm/state"[39m)[33m,[39m [35masync[39m (importOriginal) [33m=>[39m {
  [35mconst[39m actual [33m=[39m [35mawait[39m [34mimportOriginal[39m()
  [35mreturn[39m {
    [33m...[39mactual[33m,[39m
    [90m// your mocked methods[39m
  }
})

 ❯ src/components/extensions/CommentPositionTracker.ts:34:46
     32|  * Plugin key for CommentPositionTracker
     33|  */
     34| export const CommentPositionTrackerKey = new PluginKey('commentPositio…
       |                                              ^
     35| 
     36| /**
 ❯ src/components/TipTapEditor.tsx:21:1

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/80]⎯

 FAIL  src/lib/comments-rls-performance.test.ts > RLS Performance Optimization - TDD Phase > Performance Benchmark - Before vs After
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments-rls-performance.test.ts:55:27
     53|   await client.auth.signOut();
     54|   await authDelay();
     55|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     56|   if (error) throw error;
     57|   return data.user.id;
 ❯ src/lib/comments-rls-performance.test.ts:229:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/80]⎯


⎯⎯⎯⎯⎯⎯ Failed Tests 78 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  src/components/DesktopRequired.test.tsx > DesktopRequired > Professional Mobile Fallback > should have professional styling and layout
TestingLibraryElementError: Unable to find an element with the role "img"

Here are the available roles:

  heading:

  Name "Desktop Required":
  [36m<h1[39m
    [33mclass[39m=[32m"desktop-required-title"[39m
  [36m/>[39m

  Name "Why Desktop?":
  [36m<h2 />[39m

  Name "Access Options":
  [36m<h2 />[39m

  Name "🖥️ Desktop Computer":
  [36m<h3 />[39m

  Name "💻 Laptop":
  [36m<h3 />[39m

  Name "📱 Mobile (Limited)":
  [36m<h3 />[39m

  --------------------------------------------------
  list:

  Name "":
  [36m<ul />[39m

  --------------------------------------------------
  listitem:

  Name "":
  [36m<li />[39m

  Name "":
  [36m<li />[39m

  Name "":
  [36m<li />[39m

  Name "":
  [36m<li />[39m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"desktop-required"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"desktop-required-container"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"desktop-required-icon"[39m
        [36m>[39m
          [36m<svg[39m
            [33mfill[39m=[32m"none"[39m
            [33mheight[39m=[32m"64"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
            [33mviewBox[39m=[32m"0 0 24 24"[39m
            [33mwidth[39m=[32m"64"[39m
          [36m>[39m
            [36m<rect[39m
              [33mheight[39m=[32m"14"[39m
              [33mrx[39m=[32m"2"[39m
              [33mry[39m=[32m"2"[39m
              [33mwidth[39m=[32m"20"[39m
              [33mx[39m=[32m"2"[39m
              [33my[39m=[32m"3"[39m
            [36m/>[39m
            [36m<line[39m
              [33mx1[39m=[32m"8"[39m
              [33mx2[39m=[32m"16"[39m
              [33my1[39m=[32m"21"[39m
              [33my2[39m=[32m"21"[39m
            [36m/>[39m
            [36m<line[39m
              [33mx1[39m=[32m"12"[39m
              [33mx2[39m=[32m"12"[39m
              [33my1[39m=[32m"17"[39m
              [33my2[39m=[32m"21"[39m
            [36m/>[39m
          [36m</svg>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"desktop-required-content"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"desktop-required-title"[39m
          [36m>[39m
            [0mDesktop Required[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"desktop-required-description"[39m
          [36m>[39m
            [0mEAV Orchestrator is designed for video production workflows that require precision editing, multiple tabs, and collaborative features best experienced on desktop and laptop computers.[0m
          [36m</p>[39m
          [36m<div[39m
            [33mclass[39m=[32m"desktop-required-features"[39m
          [36m>[39m
            [36m<h2>[39m
              [0mWhy Desktop?[0m
            [36m</h2>[39m
            [36m<ul>[39m
              [36m<li>[39m
                [36m<strong>[39m
                  [0mRich Text Editing:[0m
                [36m</strong>[39m
                [0m Advanced paragraph-component editing with TipTap[0m
              [36m</li>[39m
              [36m<li>[39m
                [36m<strong>[39m
                  [0mMulti-Tab Workflow:[0m
                [36m</strong>[39m
                [0m Script → Review → Scenes → Voice → Edit phases[0m
              [36m</li>[39m
              [36m<li>[39m
                [36m<strong>[39m
                  [0mCollaborative Comments:[0m
                [36m</strong>[39m
                [0m Google Docs-like review system[0m
              [36m</li>[39m
              [36m<li>[39m
                [36m<strong>[39m
                  [0mProfessional Tools:[0m
                [36m</strong>[39m
                [0m Optimized for video production teams[0m
              [36m</li>[39m
            [36m</ul>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"desktop-required-instructions"[39m
          [36m>[39m
            [36m<h2>[39m
              [0mAccess Options[0m
            [36m</h2>[39m
            [36m<div[39m
              [33mclass[39m=[32m"access-options"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"access-option"[39m
              [36m>[39m
                [36m<h3>[39m
                  [0m🖥️ Desktop Computer[0m
                [36m</h3>[39m
                [36m<p>[39m
                  [0mFull feature access with optimal performance[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"access-option"[39m
              [36m>[39m
                [36m<h3>[39m
                  [0m💻 Laptop[0m
                [36m</h3>[39m
                [36m<p>[39m
                  [0mComplete workflow support with portable convenience[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"access-option"[39m
              [36m>[39m
                [36m<h3>[39m
                  [0m📱 Mobile (Limited)[0m
                [36m</h3>[39m
                [36m<p>[39m
                  [0mView-only access for reviewing scripts and comments[0m
                [36m</p>[39m
                [36m<small>[39m
                  [0mFeature in development[0m
                [36m</small>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"desktop-required-footer"[39m
          [36m>[39m
            [36m<p>[39m
              [0mThank you for choosing EAV Orchestrator for your video production workflow.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/components/DesktopRequired.test.tsx:43:27
     41|       expect(container).toBeInTheDocument()
     42| 
     43|       const icon = screen.getByRole('img', { hidden: true }) // SVG ic…
       |                           ^
     44|       expect(icon).toBeInTheDocument()
     45|     })

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/80]⎯

 FAIL  src/components/ErrorBoundary.test.tsx > ErrorBoundary > Async Error Handling > should NOT display the fallback UI for async errors originating from useEffect
Error: [2mexpect([22m[31melement[39m[2m).not.toBeInTheDocument()[22m

[31mexpected document not to contain element, found <h2
  style="margin: 0px; font-size: 18px; color: rgb(211, 47, 47);"
>
  Something went wrong
</h2> instead[39m
 ❯ src/components/ErrorBoundary.test.tsx:302:30
    300|       // This confirms the boundary was not triggered by the async err…
    301|       const fallbackUI = screen.queryByText(/something went wrong/i);
    302|       expect(fallbackUI).not.toBeInTheDocument();
       |                              ^
    303| 
    304|       // ASSERT: The child component should still be rendered normally

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/80]⎯

 FAIL  src/components/TipTapEditor.comments.test.tsx > TipTapEditor Comments - Phase 2.2 TDD > Text Selection Detection > should detect when text is selected in the editor
TestingLibraryElementError: Unable to find an element by: [data-testid="editor-content"]

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"editor-layout"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"main-editor"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"editor-header"[39m
          [36m>[39m
            [36m<div[39m
              [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
            [36m>[39m
              [36m<div>[39m
                [36m<h1[39m
                  [33mclass[39m=[32m"editor-title"[39m
                [36m>[39m
                  [0mScript: Test Video[0m
                [36m</h1>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"editor-subtitle"[39m
                [36m>[39m
                  [0mEach paragraph becomes a component (C1, C2, C3...) that flows through the production pipeline[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<button[39m
                [33mstyle[39m=[32m"background: rgb(59, 130, 246); color: white; border-radius: 6px; padding: 8px 16px; font-size: 14px; font-weight: 500; cursor: pointer; margin-top: 4px; transition: background-color 0.2s;"[39m
              [36m>[39m
                [0mConvert Soft Enters[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"editor-content"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"loading-placeholder"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"loading-spinner"[39m
              [36m/>[39m
              [36m<p>[39m
                [0mLoading script...[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
 ❯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/components/TipTapEditor.comments.test.tsx:133:29
    131|       );
    132| 
    133|       const editor = screen.getByTestId('editor-content');
       |                             ^
    134|       expect(editor).toBeInTheDocument();
    135| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/80]⎯

 FAIL  src/components/TipTapEditor.comments.test.tsx > TipTapEditor Comments - Phase 2.2 TDD > Text Selection Detection > should show comment popup when text is selected
Error: [2mexpect([22m[31mreceived[39m[2m).toBeInTheDocument()[22m

[31mreceived[39m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[39m
 ❯ src/components/TipTapEditor.comments.test.tsx:164:63
    162| 
    163|       // This will fail - no popup component exists
    164|       expect(screen.queryByTestId('comment-selection-popup')).toBeInTh…
       |                                                               ^
    165|       expect(screen.queryByText('Add comment')).toBeInTheDocument();
    166|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/80]⎯

 FAIL  src/components/TipTapEditor.comments.test.tsx > TipTapEditor Comments - Phase 2.2 TDD > Comment Highlight Extension > should apply comment highlight marks to selected text
Error: [2mexpect([22m[31mreceived[39m[2m).toBeInTheDocument()[22m

[31mreceived[39m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[39m
 ❯ src/components/TipTapEditor.comments.test.tsx:229:21
    227|       // This will fail - no comment creation mechanism exists
    228|       const popup = screen.queryByTestId('comment-selection-popup');
    229|       expect(popup).toBeInTheDocument();
       |                     ^
    230| 
    231|       const addButton = screen.queryByText('Add comment');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/80]⎯

 FAIL  src/components/TipTapEditor.comments.test.tsx > TipTapEditor Comments - Phase 2.2 TDD > Comment Position Tracking > should track character positions for comment anchoring
AssertionError: expected undefined to be defined
 ❯ src/components/TipTapEditor.comments.test.tsx:260:25
    258|       // This will fail - no position tracking utilities exist
    259|       const positions = screen.queryByTestId('editor-content')?.getAtt…
    260|       expect(positions).toBeDefined();
       |                         ^
    261|     });
    262| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/80]⎯

 FAIL  src/components/TipTapEditor.paste-handler.test.tsx > TipTap Paste Handler - Multi-Paragraph Component Extraction (TDD RED) > [RED] should preserve component structure after editing middle component
AssertionError: expected 'Compone EDITEDnt two' to contain 'Component two'

Expected: [32m"Component two"[39m
Received: [31m"Compone[7m EDITED[27mnt two"[39m

 ❯ src/components/TipTapEditor.paste-handler.test.tsx:246:44
    244|     expect(componentsAfterEdit.length).toBe(3);
    245|     expect(componentsAfterEdit[0].content).toBe('Component one');
    246|     expect(componentsAfterEdit[1].content).toContain('Component two');
       |                                            ^
    247|     expect(componentsAfterEdit[1].content).toContain('EDITED');
    248|     expect(componentsAfterEdit[2].content).toBe('Component three');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/80]⎯

 FAIL  src/components/TipTapEditor.paste-handler.test.tsx > TipTap Paste Handler - Multi-Paragraph Component Extraction (TDD RED) > [RED] should handle Google Docs paste with double newlines \n\n between paragraphs
AssertionError: expected 1 to be 3 // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- 3[39m
[31m+ 1[39m

 ❯ src/components/TipTapEditor.paste-handler.test.tsx:271:35
    269| 
    270|     // WILL FAIL - Currently creates 1 paragraph with embedded \n\n
    271|     expect(paragraphNodes.length).toBe(3);
       |                                   ^
    272|     expect(paragraphNodes[0].text).toBe('Paragraph one');
    273|     expect(paragraphNodes[1].text).toBe('Paragraph two');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/80]⎯

 FAIL  src/components/TipTapEditor.paste-handler.test.tsx > TipTap Paste Handler - Multi-Paragraph Component Extraction (TDD RED) > [RED] should preserve component identity through multiple edits
AssertionError: expected 'C1 c EDIT1ontent' to contain 'C1 content'

Expected: [32m"C1 content"[39m
Received: [31m"C1 c[7m EDIT1[27montent"[39m

 ❯ src/components/TipTapEditor.paste-handler.test.tsx:308:40
    306|     // WILL FAIL if edits cause component merging
    307|     expect(finalComponents.length).toBe(3);
    308|     expect(finalComponents[0].content).toContain('C1 content');
       |                                        ^
    309|     expect(finalComponents[0].content).toContain('EDIT1');
    310|     expect(finalComponents[1].content).toBe('C2 content');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/80]⎯

 FAIL  src/components/TipTapEditor.paste-handler.test.tsx > TipTap Paste Handler - Multi-Paragraph Component Extraction (TDD RED) > [RED] should not merge adjacent components when editing between them
AssertionError: expected 'First componen more textt' to contain 'First component'

Expected: [32m"First component"[39m
Received: [31m"First componen[7m more text[27mt"[39m

 ❯ src/components/TipTapEditor.paste-handler.test.tsx:341:40
    339|     // WILL FAIL if components merge during edit
    340|     expect(componentsAfter.length).toBe(2);
    341|     expect(componentsAfter[0].content).toContain('First component');
       |                                        ^
    342|     expect(componentsAfter[0].content).toContain('more text');
    343|     expect(componentsAfter[1].content).toBe('Second component');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/80]⎯

 FAIL  src/components/TipTapEditor.paste-handler.test.tsx > TipTap Paste Handler - Spacing Behavior (No Extra Empty Lines) > should NOT create empty paragraphs between content paragraphs
AssertionError: expected 2 to be +0 // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- 0[39m
[31m+ 2[39m

 ❯ src/components/TipTapEditor.paste-handler.test.tsx:410:36
    408|     // CRITICAL: Should NOT have empty paragraphs in document
    409|     const emptyParagraphs = allParagraphs.filter(p => p.isEmpty);
    410|     expect(emptyParagraphs.length).toBe(0); // WILL FAIL if preserveWh…
       |                                    ^
    411|   });
    412| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/80]⎯

 FAIL  src/components/TipTapEditor.script-status.test.tsx > TipTapEditor - Script Status Selector (TDD REFACTOR Phase) > [RED] Status Dropdown - Rendering > should render status dropdown in editor header
TestingLibraryElementError: Unable to find a label with the text of: /workflow status/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
 ❯ waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 ❯ src/components/TipTapEditor.script-status.test.tsx:150:43
    148| 
    149|       // WILL FAIL - status selector doesn't exist yet
    150|       const statusDropdown = await screen.findByLabelText(/workflow st…
       |                                           ^
    151|       expect(statusDropdown).toBeInTheDocument();
    152|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/80]⎯

 FAIL  src/components/TipTapEditor.script-status.test.tsx > TipTapEditor - Script Status Selector (TDD REFACTOR Phase) > [RED] Status Dropdown - Rendering > should display current script status in dropdown
TestingLibraryElementError: Unable to find a label with the text of: /workflow status/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
 ❯ waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 ❯ src/components/TipTapEditor.script-status.test.tsx:163:43
    161| 
    162|       // WILL FAIL - status display doesn't exist yet
    163|       const statusDropdown = await screen.findByLabelText(/workflow st…
       |                                           ^
    164|       expect(statusDropdown).toHaveValue('in_review');
    165|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[15/80]⎯

 FAIL  src/components/TipTapEditor.script-status.test.tsx > TipTapEditor - Script Status Selector (TDD REFACTOR Phase) > [RED] Status Dropdown - Rendering > should show all four status options in dropdown
TestingLibraryElementError: Unable to find a label with the text of: /workflow status/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
 ❯ waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 ❯ src/components/TipTapEditor.script-status.test.tsx:171:43
    169| 
    170|       // WILL FAIL - dropdown and options don't exist yet
    171|       const statusDropdown = await screen.findByLabelText(/workflow st…
       |                                           ^
    172|       await userEvent.click(statusDropdown);
    173| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[16/80]⎯

 FAIL  src/components/TipTapEditor.script-status.test.tsx > TipTapEditor - Script Status Selector (TDD REFACTOR Phase) > [RED] Status Change - User Interaction > should allow user to change status from draft to in_review
TestingLibraryElementError: Unable to find a label with the text of: /workflow status/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
 ❯ waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 ❯ src/components/TipTapEditor.script-status.test.tsx:188:43
    186| 
    187|       // WILL FAIL - interaction flow doesn't exist yet
    188|       const statusDropdown = await screen.findByLabelText(/workflow st…
       |                                           ^
    189|       await user.click(statusDropdown);
    190|       await user.click(screen.getByText('In Review'));

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[17/80]⎯

 FAIL  src/components/TipTapEditor.script-status.test.tsx > TipTapEditor - Script Status Selector (TDD REFACTOR Phase) > [RED] Status Change - User Interaction > should call updateScript with new status on change
TestingLibraryElementError: Unable to find a label with the text of: /workflow status/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
 ❯ waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 ❯ src/components/TipTapEditor.script-status.test.tsx:201:43
    199| 
    200|       // WILL FAIL - updateScriptStatus not called for status changes …
    201|       const statusDropdown = await screen.findByLabelText(/workflow st…
       |                                           ^
    202|       await user.click(statusDropdown);
    203|       await user.click(screen.getByText('Approved'));

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[18/80]⎯

 FAIL  src/components/TipTapEditor.script-status.test.tsx > TipTapEditor - Script Status Selector (TDD REFACTOR Phase) > [RED] Optimistic UI Updates > should update status immediately in UI (optimistic)
TestingLibraryElementError: Unable to find a label with the text of: /workflow status/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
 ❯ waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 ❯ src/components/TipTapEditor.script-status.test.tsx:230:43
    228| 
    229|       // WILL FAIL - optimistic update not implemented yet
    230|       const statusDropdown = await screen.findByLabelText(/workflow st…
       |                                           ^
    231|       await user.click(statusDropdown);
    232|       await user.click(screen.getByText('Rework'));

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[19/80]⎯

 FAIL  src/components/TipTapEditor.script-status.test.tsx > TipTapEditor - Script Status Selector (TDD REFACTOR Phase) > [RED] Optimistic UI Updates > should rollback status on API failure
TestingLibraryElementError: Unable to find a label with the text of: /workflow status/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
 ❯ waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 ❯ src/components/TipTapEditor.script-status.test.tsx:249:43
    247| 
    248|       // WILL FAIL - rollback logic not implemented yet
    249|       const statusDropdown = await screen.findByLabelText(/workflow st…
       |                                           ^
    250|       const initialStatus = statusDropdown.getAttribute('value');
    251| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[20/80]⎯

 FAIL  src/components/TipTapEditor.script-status.test.tsx > TipTapEditor - Script Status Selector (TDD REFACTOR Phase) > [RED] Database Persistence > should persist status changes to database
TestingLibraryElementError: Unable to find a label with the text of: /workflow status/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
 ❯ waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 ❯ src/components/TipTapEditor.script-status.test.tsx:269:43
    267| 
    268|       // WILL FAIL - persistence not implemented yet
    269|       const statusDropdown = await screen.findByLabelText(/workflow st…
       |                                           ^
    270|       await user.click(statusDropdown);
    271|       await user.click(screen.getByText('In Review'));

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[21/80]⎯

 FAIL  src/components/TipTapEditor.script-status.test.tsx > TipTapEditor - Script Status Selector (TDD REFACTOR Phase) > [RED] Database Persistence > should debounce multiple rapid status changes
TestingLibraryElementError: Unable to find a label with the text of: /workflow status/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
 ❯ waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 ❯ src/components/TipTapEditor.script-status.test.tsx:288:43
    286| 
    287|       // WILL FAIL - debouncing not implemented yet
    288|       const statusDropdown = await screen.findByLabelText(/workflow st…
       |                                           ^
    289| 
    290|       // Rapidly change status multiple times

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22/80]⎯

 FAIL  src/components/TipTapEditor.script-status.test.tsx > TipTapEditor - Script Status Selector (TDD REFACTOR Phase) > [RED] Access Control > should allow all authenticated users to change status
TestingLibraryElementError: Unable to find a label with the text of: /workflow status/i

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"editor-layout"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"main-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-header"[39m
        [36m>[39m
          [36m<div[39m
            [33mstyle[39m=[32m"display: flex; justify-content: space-between; align-items: flex-start;"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"editor-title"[39m
              [36m>[39m
                [0mScript Editor[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"editor-subtitle"[39m
              [36m>[39m
                [0mSelect a video from the navigation to start editing its script[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-content"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"no-video-placeholder"[39m
          [36m>[39m
            [36m<h3>[39m
              [0mSelect a Video to Edit[0m
            [36m</h3>[39m
            [36m<p>[39m
              [0mChoose a video from the navigation panel to start editing its script.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mEach paragraph you write becomes a component that flows through the production pipeline.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m...
 ❯ waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 ❯ src/components/TipTapEditor.script-status.test.tsx:323:43
    321| 
    322|       // WILL FAIL - status selector might not be accessible yet
    323|       const statusDropdown = await screen.findByLabelText(/workflow st…
       |                                           ^
    324|       expect(statusDropdown).not.toBeDisabled();
    325| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[23/80]⎯

 FAIL  src/components/TipTapEditor.test.tsx > TipTapEditor with Navigation > should render with navigation integration
 FAIL  src/components/TipTapEditor.test.tsx > TipTapEditor with Navigation > should show "Select a video to edit" when no video selected
TypeError: editor.setEditable is not a function
 ❯ src/components/TipTapEditor.tsx:837:14
    835|   useEffect(() => {
    836|     if (editor) {
    837|       editor.setEditable(permissions.canEditScript);
       |              ^
    838|     }
    839|   }, [editor, permissions.canEditScript]);
 ❯ commitHookEffectListMount node_modules/react-dom/cjs/react-dom.development.js:23189:26
 ❯ commitPassiveMountOnFiber node_modules/react-dom/cjs/react-dom.development.js:24970:11
 ❯ commitPassiveMountEffects_complete node_modules/react-dom/cjs/react-dom.development.js:24930:9
 ❯ commitPassiveMountEffects_begin node_modules/react-dom/cjs/react-dom.development.js:24917:7
 ❯ commitPassiveMountEffects node_modules/react-dom/cjs/react-dom.development.js:24905:3
 ❯ flushPassiveEffectsImpl node_modules/react-dom/cjs/react-dom.development.js:27078:3
 ❯ flushPassiveEffects node_modules/react-dom/cjs/react-dom.development.js:27023:14
 ❯ node_modules/react-dom/cjs/react-dom.development.js:26808:9
 ❯ flushActQueue node_modules/react/cjs/react.development.js:2667:24

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[24/80]⎯

 FAIL  src/lib/comments-rls-performance.test.ts > RLS Performance Optimization - TDD Phase > New Security Model - user_accessible_scripts View > should have user_accessible_scripts view (WILL FAIL - not implemented)
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments-rls-performance.test.ts:55:27
     53|   await client.auth.signOut();
     54|   await authDelay();
     55|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     56|   if (error) throw error;
     57|   return data.user.id;
 ❯ src/lib/comments-rls-performance.test.ts:96:7

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[25/80]⎯

 FAIL  src/lib/comments-rls-performance.test.ts > RLS Performance Optimization - TDD Phase > New Security Model - user_accessible_scripts View > admin should see all scripts in user_accessible_scripts view
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments-rls-performance.test.ts:55:27
     53|   await client.auth.signOut();
     54|   await authDelay();
     55|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     56|   if (error) throw error;
     57|   return data.user.id;
 ❯ src/lib/comments-rls-performance.test.ts:110:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[26/80]⎯

 FAIL  src/lib/comments-rls-performance.test.ts > RLS Performance Optimization - TDD Phase > New Security Model - user_accessible_scripts View > client should see only assigned scripts in view
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments-rls-performance.test.ts:55:27
     53|   await client.auth.signOut();
     54|   await authDelay();
     55|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     56|   if (error) throw error;
     57|   return data.user.id;
 ❯ src/lib/comments-rls-performance.test.ts:126:28

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[27/80]⎯

 FAIL  src/lib/comments-rls-performance.test.ts > RLS Performance Optimization - TDD Phase > New Security Model - user_accessible_scripts View > unauthorized user should see no scripts in view
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments-rls-performance.test.ts:55:27
     53|   await client.auth.signOut();
     54|   await authDelay();
     55|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     56|   if (error) throw error;
     57|   return data.user.id;
 ❯ src/lib/comments-rls-performance.test.ts:139:34

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[28/80]⎯

 FAIL  src/lib/comments-rls-performance.test.ts > RLS Performance Optimization - TDD Phase > Optimized RLS Policies - Single JOIN > should maintain security boundaries with optimized policies
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments-rls-performance.test.ts:55:27
     53|   await client.auth.signOut();
     54|   await authDelay();
     55|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     56|   if (error) throw error;
     57|   return data.user.id;
 ❯ src/lib/comments-rls-performance.test.ts:184:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[29/80]⎯

 FAIL  src/lib/comments-rls-performance.test.ts > RLS Performance Optimization - TDD Phase > INSERT/UPDATE/DELETE Performance > should optimize INSERT operations with simplified policy
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments-rls-performance.test.ts:55:27
     53|   await client.auth.signOut();
     54|   await authDelay();
     55|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     56|   if (error) throw error;
     57|   return data.user.id;
 ❯ src/lib/comments-rls-performance.test.ts:335:28

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[30/80]⎯

 FAIL  src/lib/comments-rls-performance.test.ts > RLS Performance Optimization - TDD Phase > INSERT/UPDATE/DELETE Performance > should optimize UPDATE operations with simplified policy
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments-rls-performance.test.ts:55:27
     53|   await client.auth.signOut();
     54|   await authDelay();
     55|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     56|   if (error) throw error;
     57|   return data.user.id;
 ❯ src/lib/comments-rls-performance.test.ts:361:28

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[31/80]⎯

 FAIL  src/lib/comments-rls-performance.test.ts > RLS Performance Optimization - TDD Phase > INSERT/UPDATE/DELETE Performance > should optimize DELETE operations with simplified policy
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments-rls-performance.test.ts:55:27
     53|   await client.auth.signOut();
     54|   await authDelay();
     55|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     56|   if (error) throw error;
     57|   return data.user.id;
 ❯ src/lib/comments-rls-performance.test.ts:393:28

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[32/80]⎯

 FAIL  src/lib/comments-rls-performance.test.ts > RLS Performance Optimization - TDD Phase > Backward Compatibility > should maintain exact same security behavior as current system
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments-rls-performance.test.ts:55:27
     53|   await client.auth.signOut();
     54|   await authDelay();
     55|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     56|   if (error) throw error;
     57|   return data.user.id;
 ❯ src/lib/comments-rls-performance.test.ts:427:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[33/80]⎯

 FAIL  src/lib/comments-rls-performance.test.ts > RLS Performance Optimization - TDD Phase > Backward Compatibility > should not break existing application code
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments-rls-performance.test.ts:55:27
     53|   await client.auth.signOut();
     54|   await authDelay();
     55|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     56|   if (error) throw error;
     57|   return data.user.id;
 ❯ src/lib/comments-rls-performance.test.ts:468:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[34/80]⎯

 FAIL  src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments Table Schema > admin should create comment with required fields
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:106:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[35/80]⎯

 FAIL  src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments Table Schema > admin should create threaded comment reply
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:133:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[36/80]⎯

 FAIL  src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments Table Schema > admin should resolve comment with resolved_at and resolved_by
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:169:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[37/80]⎯

 FAIL  src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments RLS Security - CONTRACT-DRIVEN-CORRECTION > admin should have full access to all comments
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:205:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[38/80]⎯

 FAIL  src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments RLS Security - CONTRACT-DRIVEN-CORRECTION > client user should read comments from their assigned project
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:235:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[39/80]⎯

 FAIL  src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments RLS Security - CONTRACT-DRIVEN-CORRECTION > client user can create comments (TODO: should be read-only)
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:258:28

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[40/80]⎯

 FAIL  src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments RLS Security - CONTRACT-DRIVEN-CORRECTION > unauthorized user should NOT see any comments
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:284:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[41/80]⎯

 FAIL  src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments RLS Security - CONTRACT-DRIVEN-CORRECTION > unauthorized user should NOT create comments
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:306:34

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[42/80]⎯

 FAIL  src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments Position Validation > should validate position bounds (negative positions)
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:327:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[43/80]⎯

 FAIL  src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments Position Validation > should validate start_position < end_position
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:347:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[44/80]⎯

 FAIL  src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments Threading Behavior > admin should handle parent comment deletion gracefully (SET NULL)
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:369:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[45/80]⎯

 FAIL  src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments Performance Indexes > admin should efficiently query comments by script_id
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:425:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[46/80]⎯

 FAIL  src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > Comments Performance Indexes > admin should efficiently filter by resolved status
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:462:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[47/80]⎯

 FAIL  src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > getComments Performance - N+1 Query Fix > should fetch all user profiles in single query, not N+1 queries
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:499:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[48/80]⎯

 FAIL  src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > getComments Performance - N+1 Query Fix > should complete getComments for 50 comments in <200ms
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:546:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[49/80]⎯

 FAIL  src/lib/comments.test.ts > Comments Infrastructure - Integration Tests > getComments Performance - N+1 Query Fix > should handle mixed users efficiently with single profile query
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:578:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[50/80]⎯

 FAIL  src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > createComment Function - TDD (WILL FAIL) > should create comment and return CommentWithUser type
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:665:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[51/80]⎯

 FAIL  src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > createComment Function - TDD (WILL FAIL) > should validate required fields and return error
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:685:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[52/80]⎯

 FAIL  src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > getComments Function - TDD (WILL FAIL) > should fetch comments with user info and threading
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:706:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[53/80]⎯

 FAIL  src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > getComments Function - TDD (WILL FAIL) > should filter comments by resolved status
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:726:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[54/80]⎯

 FAIL  src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > updateComment Function - TDD (WILL FAIL) > should update comment content and return updated comment
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:759:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[55/80]⎯

 FAIL  src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > updateComment Function - TDD (WILL FAIL) > should resolve comment with timestamp and user
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:781:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[56/80]⎯

 FAIL  src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > deleteComment Function - TDD (WILL FAIL) > should soft delete comment (mark as deleted)
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:801:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[57/80]⎯

 FAIL  src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > POSITION DRIFT PERSISTENCE - TDD (RED PHASE) > should persist highlightedText when creating comment
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:828:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[58/80]⎯

 FAIL  src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > POSITION DRIFT PERSISTENCE - TDD (RED PHASE) > should persist recovered positions after position recovery
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:855:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[59/80]⎯

 FAIL  src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > CASCADE SOFT DELETE - TDD (WILL FAIL) > should cascade delete parent with one child
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:898:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[60/80]⎯

 FAIL  src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > CASCADE SOFT DELETE - TDD (WILL FAIL) > should cascade delete parent with multiple children
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:934:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[61/80]⎯

 FAIL  src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > CASCADE SOFT DELETE - TDD (WILL FAIL) > should cascade delete nested descendants (3+ levels)
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:976:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[62/80]⎯

 FAIL  src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > CASCADE SOFT DELETE - TDD (WILL FAIL) > should only delete target comment when no children exist
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:1031:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[63/80]⎯

 FAIL  src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > CASCADE SOFT DELETE - TDD (WILL FAIL) > should handle deep nesting (5+ levels) efficiently
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:1066:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[64/80]⎯

 FAIL  src/lib/comments.test.ts > Comments CRUD Functions - TDD Phase > CASCADE SOFT DELETE - TDD (WILL FAIL) > should maintain transaction atomicity - all or nothing
AuthApiError: Invalid login credentials
 ❯ handleError node_modules/@supabase/auth-js/src/lib/fetch.ts:102:9
 ❯ _handleRequest node_modules/@supabase/auth-js/src/lib/fetch.ts:195:5
 ❯ _request node_modules/@supabase/auth-js/src/lib/fetch.ts:157:16
 ❯ SupabaseAuthClient.signInWithPassword node_modules/@supabase/auth-js/src/GoTrueClient.ts:583:15
 ❯ signInAsUser src/lib/comments.test.ts:63:27
     61|   await authDelay(); // Rate limit prevention
     62|   
     63|   const { data, error } = await client.auth.signInWithPassword({ email…
       |                           ^
     64|   if (error) throw error;
     65|   
 ❯ src/lib/comments.test.ts:1110:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[65/80]⎯

 FAIL  src/components/comments/CommentSidebar.connection-state.test.tsx > CommentSidebar - Connection State Machine > Connection State Transitions > should transition to degraded after 4 failed reconnection attempts
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ❯ src/components/comments/CommentSidebar.connection-state.test.tsx:174:5
    172|     });
    173| 
    174|     it('should transition to degraded after 4 failed reconnection atte…
       |     ^
    175|       vi.useFakeTimers();
    176| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[66/80]⎯

 FAIL  src/components/comments/CommentSidebar.connection-state.test.tsx > CommentSidebar - Connection State Machine > UI Preservation During Reconnection > should preserve comments UI during reconnecting state
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ❯ src/components/comments/CommentSidebar.connection-state.test.tsx:206:5
    204| 
    205|   describe('UI Preservation During Reconnection', () => {
    206|     it('should preserve comments UI during reconnecting state', async …
       |     ^
    207|       render(
    208|         

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[67/80]⎯

 FAIL  src/components/comments/CommentSidebar.connection-state.test.tsx > CommentSidebar - Connection State Machine > UI Preservation During Reconnection > should NOT show destructive error state during reconnection
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ❯ src/components/comments/CommentSidebar.connection-state.test.tsx:229:5
    227|     });
    228| 
    229|     it('should NOT show destructive error state during reconnection', …
       |     ^
    230|       render(
    231|         

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[68/80]⎯

 FAIL  src/components/comments/CommentSidebar.connection-state.test.tsx > CommentSidebar - Connection State Machine > Action Button State Management > should disable action buttons when connectionStatus !== "connected"
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ❯ src/components/comments/CommentSidebar.connection-state.test.tsx:254:5
    252| 
    253|   describe('Action Button State Management', () => {
    254|     it('should disable action buttons when connectionStatus !== "conne…
       |     ^
    255|       const { container } = render(
    256|         

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[69/80]⎯

 FAIL  src/components/comments/CommentSidebar.connection-state.test.tsx > CommentSidebar - Connection State Machine > Action Button State Management > should re-enable action buttons when returning to connected state
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ❯ src/components/comments/CommentSidebar.connection-state.test.tsx:288:5
    286|     });
    287| 
    288|     it('should re-enable action buttons when returning to connected st…
       |     ^
    289|       const { container } = render(
    290|         

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[70/80]⎯

 FAIL  src/components/comments/CommentSidebar.connection-state.test.tsx > CommentSidebar - Connection State Machine > Status Banner Visibility > should show "Reconnecting..." banner when connectionStatus is "reconnecting"
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ❯ src/components/comments/CommentSidebar.connection-state.test.tsx:327:5
    325| 
    326|   describe('Status Banner Visibility', () => {
    327|     it('should show "Reconnecting..." banner when connectionStatus is …
       |     ^
    328|       render(
    329|         

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[71/80]⎯

 FAIL  src/components/comments/CommentSidebar.connection-state.test.tsx > CommentSidebar - Connection State Machine > Status Banner Visibility > should show "Connection degraded" banner when connectionStatus is "degraded"
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ❯ src/components/comments/CommentSidebar.connection-state.test.tsx:350:5
    348|     });
    349| 
    350|     it('should show "Connection degraded" banner when connectionStatus…
       |     ^
    351|       vi.useFakeTimers();
    352| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[72/80]⎯

 FAIL  src/components/comments/CommentSidebar.connection-state.test.tsx > CommentSidebar - Connection State Machine > Status Banner Visibility > should hide banner when connectionStatus is "connected"
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 ❯ src/components/comments/CommentSidebar.connection-state.test.tsx:379:5
    377|     });
    378| 
    379|     it('should hide banner when connectionStatus is "connected"', asyn…
       |     ^
    380|       render(
    381|         

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[73/80]⎯

 FAIL  src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Comment Display > should display comment metadata correctly
TestingLibraryElementError: Unable to find an element with the text: /user-1/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<aside[39m
      [33maria-label[39m=[32m"Comments Sidebar"[39m
      [33mclass[39m=[32m"comments-sidebar"[39m
      [33mrole[39m=[32m"complementary"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"comments-sticky-header"[39m
      [36m>[39m
        [36m<header[39m
          [33maria-label[39m=[32m"Comments Header"[39m
          [33mrole[39m=[32m"banner"[39m
        [36m>[39m
          [36m<h2>[39m
            [0mComments[0m
          [36m</h2>[39m
        [36m</header>[39m
        [36m<div[39m
          [33mclass[39m=[32m"comment-filters"[39m
        [36m>[39m
          [36m<button[39m
            [33maria-label[39m=[32m"All Comments"[39m
            [33mclass[39m=[32m"active"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mAll Comments[0m
          [36m</button>[39m
          [36m<button[39m
            [33maria-label[39m=[32m"Open Comments"[39m
            [33mclass[39m=[32m""[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mOpen Comments[0m
          [36m</button>[39m
          [36m<button[39m
            [33maria-label[39m=[32m"Resolved Comments"[39m
            [33mclass[39m=[32m""[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mResolved Comments[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"comments-list"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"comment-thread"[39m
        [36m>[39m
          [36m<article[39m
            [33mclass[39m=[32m"comment-card "[39m
            [33mdata-comment-id[39m=[32m"comment-1"[39m
            [33mrole[39m=[32m"article"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"comment-header"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-number-badge"[39m
              [36m>[39m
                [0m1[0m
              [36m</div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"comment-author"[39m
              [36m>[39m
                [0mTest User 1[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"comment-date"[39m
              [36m>[39m
                [0m9/29/2024[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"comment-content"[39m
            [36m>[39m
              [0mThis needs revision.[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"comment-actions"[39m
            [36m>[39m
              [36m<button[39m
                [33maria-label[39m=[32m"Reply"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
                [0mReply[0m
              [36m</button>[39m
              [36m<button[39m
                [33maria-label[39m=[32m"Resolve"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
                [0mResolve[0m
              [36m</button>[39m
              [36m<button[39m
                [33maria-label[39m=[32m"Edit"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
                [0mEdit[0m
              [36m</button>[39m
              [36m<button[39m
                [33maria-label[39m=[32m"Delete"[39m
                [33mclass[39m=[32m"delete-button"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
                [0mDelete[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</article>[39m
          [36m<div>[39m
            [36m<article[39m
              [33mclass[39m=[32m"comment-card comment-reply"[39m
              [33mrole[39m=[32m"article"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-header"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"comment-author"[39m
                [36m>[39m
                  [0mTest User 2[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"comment-date"[39m
                [36m>[39m
                  [0m9/29/2024[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-content"[39m
              [36m>[39m
                [0mI agree with this change.[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-actions"[39m
              [36m>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Reply"[39m
                  [33mtype[39m=[32m"button"[39m
                [36m>[39m
                  [0mReply[0m
                [36m</button>[39m
              [36m</div>[39m
            [36m</article>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"comment-thread"[39m
        [36m>[39m
          [36m<article[39m
            [33mclass[39m=[32m"comment-card comment-resolved"[39m
            [33mdata-comment-id[39m=[32m"comment-3"[39m
            [33mrole[39m=[32m"article"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"comment-header"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-number-badge"[39m
              [36m>[39m
                [0m2[0m
              [36m</div>[39m
              [36m<span[39m
                [33mclass[39m=[32m"comment-author"[39m
              [36m>[39m
                [0mTest User 1[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"comment-date"[39m
              [36m>[39m
                [0m9/29/2024[0m
              [36m</span>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"comment-content"[39m
            [36m>[39m
              [0mFixed in new version.[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"comment-actions"[39m
            [36m>[39m
              [36m<button[39m
                [33maria-label[39m=[32m"Reply"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
                [0mReply[0m
              [36m</button>[39m
              [36m<button[39m
                [33maria-label[39m=[32m"Reopen"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
               ...

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<aside[39m
        [33maria-label[39m=[32m"Comments Sidebar"[39m
        [33mclass[39m=[32m"comments-sidebar"[39m
        [33mrole[39m=[32m"complementary"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"comments-sticky-header"[39m
        [36m>[39m
          [36m<header[39m
            [33maria-label[39m=[32m"Comments Header"[39m
            [33mrole[39m=[32m"banner"[39m
          [36m>[39m
            [36m<h2>[39m
              [0mComments[0m
            [36m</h2>[39m
          [36m</header>[39m
          [36m<div[39m
            [33mclass[39m=[32m"comment-filters"[39m
          [36m>[39m
            [36m<button[39m
              [33maria-label[39m=[32m"All Comments"[39m
              [33mclass[39m=[32m"active"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mAll Comments[0m
            [36m</button>[39m
            [36m<button[39m
              [33maria-label[39m=[32m"Open Comments"[39m
              [33mclass[39m=[32m""[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mOpen Comments[0m
            [36m</button>[39m
            [36m<button[39m
              [33maria-label[39m=[32m"Resolved Comments"[39m
              [33mclass[39m=[32m""[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mResolved Comments[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"comments-list"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"comment-thread"[39m
          [36m>[39m
            [36m<article[39m
              [33mclass[39m=[32m"comment-card "[39m
              [33mdata-comment-id[39m=[32m"comment-1"[39m
              [33mrole[39m=[32m"article"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"comment-number-badge"[39m
                [36m>[39m
                  [0m1[0m
                [36m</div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"comment-author"[39m
                [36m>[39m
                  [0mTest User 1[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"comment-date"[39m
                [36m>[39m
                  [0m9/29/2024[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-content"[39m
              [36m>[39m
                [0mThis needs revision.[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-actions"[39m
              [36m>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Reply"[39m
                  [33mtype[39m=[32m"button"[39m
                [36m>[39m
                  [0mReply[0m
                [36m</button>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Resolve"[39m
                  [33mtype[39m=[32m"button"[39m
                [36m>[39m
                  [0mResolve[0m
                [36m</button>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Edit"[39m
                  [33mtype[39m=[32m"button"[39m
                [36m>[39m
                  [0mEdit[0m
                [36m</button>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Delete"[39m
                  [33mclass[39m=[32m"delete-button"[39m
                  [33mtype[39m=[32m"button"[39m
                [36m>[39m
                  [0mDelete[0m
                [36m</button>[39m
              [36m</div>[39m
            [36m</article>[39m
            [36m<div>[39m
              [36m<article[39m
                [33mclass[39m=[32m"comment-card comment-reply"[39m
                [33mrole[39m=[32m"article"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"comment-header"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"comment-author"[39m
                  [36m>[39m
                    [0mTest User 2[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"comment-date"[39m
                  [36m>[39m
                    [0m9/29/2024[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"comment-content"[39m
                [36m>[39m
                  [0mI agree with this change.[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"comment-actions"[39m
                [36m>[39m
                  [36m<button[39m
                    [33maria-label[39m=[32m"Reply"[39m
                    [33mtype[39m=[32m"button"[39m
                  [36m>[39m
                    [0mReply[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</article>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"comment-thread"[39m
          [36m>[39m
            [36m<article[39m
              [33mclass[39m=[32m"comment-card comment-resolved"[39m
              [33mdata-comment-id[39m=[32m"comment-3"[39m
              [33mrole[39m=[32m"article"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"comment-number-badge"[39m
                [36m>[39m
                  [0m2[0m
                [36m</div>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"comment-author"[39m
                [36m>[39m
                  [0mTest User 1[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"comment-date"[39m
                [36m>[39m
                  [0m9/29/2024[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-content"[39m
              [36m>[39m
                [0mFixed in new version.[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"comment-actions"[39m
              [36m>[39m
      ...
 ❯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 ❯ src/components/comments/CommentSidebar.test.tsx:195:13
    193|       render(<CommentSidebar scriptId="script-1" />);
    194| 
    195|       await waitFor(() => {
       |             ^
    196|         // Should show user info, timestamp, content
    197|         expect(screen.getByText('This needs revision.')).toBeInTheDocu…

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[74/80]⎯

 FAIL  src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Filter Functionality > should filter to show only open comments
TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/open comments/i`

Here are the accessible roles:

  complementary:

  Name "Comments Sidebar":
  [36m<aside[39m
    [33maria-label[39m=[32m"Comments Sidebar"[39m
    [33mclass[39m=[32m"comments-sidebar"[39m
    [33mrole[39m=[32m"complementary"[39m
  [36m/>[39m

  --------------------------------------------------
  status:

  Name "Loading Comments":
  [36m<div[39m
    [33maria-label[39m=[32m"Loading Comments"[39m
    [33mrole[39m=[32m"status"[39m
  [36m/>[39m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<aside[39m
      [33maria-label[39m=[32m"Comments Sidebar"[39m
      [33mclass[39m=[32m"comments-sidebar"[39m
      [33mrole[39m=[32m"complementary"[39m
    [36m>[39m
      [36m<div[39m
        [33maria-label[39m=[32m"Loading Comments"[39m
        [33mrole[39m=[32m"status"[39m
      [36m>[39m
        [0mLoading comments...[0m
      [36m</div>[39m
    [36m</aside>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/components/comments/CommentSidebar.test.tsx:238:33
    236|       render(<CommentSidebar scriptId="script-1" />);
    237| 
    238|       const openFilter = screen.getByRole('button', { name: /open comm…
       |                                 ^
    239|       fireEvent.click(openFilter);
    240| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[75/80]⎯

 FAIL  src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Filter Functionality > should filter to show only resolved comments
TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/resolved comments/i`

Here are the accessible roles:

  complementary:

  Name "Comments Sidebar":
  [36m<aside[39m
    [33maria-label[39m=[32m"Comments Sidebar"[39m
    [33mclass[39m=[32m"comments-sidebar"[39m
    [33mrole[39m=[32m"complementary"[39m
  [36m/>[39m

  --------------------------------------------------
  status:

  Name "Loading Comments":
  [36m<div[39m
    [33maria-label[39m=[32m"Loading Comments"[39m
    [33mrole[39m=[32m"status"[39m
  [36m/>[39m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<aside[39m
      [33maria-label[39m=[32m"Comments Sidebar"[39m
      [33mclass[39m=[32m"comments-sidebar"[39m
      [33mrole[39m=[32m"complementary"[39m
    [36m>[39m
      [36m<div[39m
        [33maria-label[39m=[32m"Loading Comments"[39m
        [33mrole[39m=[32m"status"[39m
      [36m>[39m
        [0mLoading comments...[0m
      [36m</div>[39m
    [36m</aside>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/components/comments/CommentSidebar.test.tsx:252:37
    250|       render(<CommentSidebar scriptId="script-1" />);
    251| 
    252|       const resolvedFilter = screen.getByRole('button', { name: /resol…
       |                                     ^
    253|       fireEvent.click(resolvedFilter);
    254| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[76/80]⎯

 FAIL  src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Comment Creation > should show creation form when createComment prop is provided
TestingLibraryElementError: Unable to find an accessible element with the role "form" and name `/new comment/i`

Here are the accessible roles:

  complementary:

  Name "Comments Sidebar":
  [36m<aside[39m
    [33maria-label[39m=[32m"Comments Sidebar"[39m
    [33mclass[39m=[32m"comments-sidebar"[39m
    [33mrole[39m=[32m"complementary"[39m
  [36m/>[39m

  --------------------------------------------------
  status:

  Name "Loading Comments":
  [36m<div[39m
    [33maria-label[39m=[32m"Loading Comments"[39m
    [33mrole[39m=[32m"status"[39m
  [36m/>[39m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<aside[39m
      [33maria-label[39m=[32m"Comments Sidebar"[39m
      [33mclass[39m=[32m"comments-sidebar"[39m
      [33mrole[39m=[32m"complementary"[39m
    [36m>[39m
      [36m<div[39m
        [33maria-label[39m=[32m"Loading Comments"[39m
        [33mrole[39m=[32m"status"[39m
      [36m>[39m
        [0mLoading comments...[0m
      [36m</div>[39m
    [36m</aside>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/components/comments/CommentSidebar.test.tsx:285:21
    283|       render(<CommentSidebar scriptId="script-1" createComment={create…
    284| 
    285|       expect(screen.getByRole('form', { name: /new comment/i })).toBeI…
       |                     ^
    286|       expect(screen.getByRole('textbox', { name: /comment text/i })).t…
    287|       expect(screen.getByRole('button', { name: /submit/i })).toBeInTh…

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[77/80]⎯

 FAIL  src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Comment Creation > should call onCommentCreated when form is submitted
TestingLibraryElementError: Unable to find an accessible element with the role "textbox" and name `/comment text/i`

Here are the accessible roles:

  complementary:

  Name "Comments Sidebar":
  [36m<aside[39m
    [33maria-label[39m=[32m"Comments Sidebar"[39m
    [33mclass[39m=[32m"comments-sidebar"[39m
    [33mrole[39m=[32m"complementary"[39m
  [36m/>[39m

  --------------------------------------------------
  status:

  Name "Loading Comments":
  [36m<div[39m
    [33maria-label[39m=[32m"Loading Comments"[39m
    [33mrole[39m=[32m"status"[39m
  [36m/>[39m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<aside[39m
      [33maria-label[39m=[32m"Comments Sidebar"[39m
      [33mclass[39m=[32m"comments-sidebar"[39m
      [33mrole[39m=[32m"complementary"[39m
    [36m>[39m
      [36m<div[39m
        [33maria-label[39m=[32m"Loading Comments"[39m
        [33mrole[39m=[32m"status"[39m
      [36m>[39m
        [0mLoading comments...[0m
      [36m</div>[39m
    [36m</aside>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/components/comments/CommentSidebar.test.tsx:313:31
    311|       );
    312| 
    313|       const textarea = screen.getByRole('textbox', { name: /comment te…
       |                               ^
    314|       const submitButton = screen.getByRole('button', { name: /submit/…
    315| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[78/80]⎯

 FAIL  src/components/comments/CommentSidebar.test.tsx > CommentSidebar > Error Handling > should show error state when comments fail to load
TestingLibraryElementError: Unable to find an element with the text: /error loading comments/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<aside[39m
      [33maria-label[39m=[32m"Comments Sidebar"[39m
      [33mclass[39m=[32m"comments-sidebar"[39m
      [33mrole[39m=[32m"complementary"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"comments-sticky-header"[39m
      [36m>[39m
        [36m<header[39m
          [33maria-label[39m=[32m"Comments Header"[39m
          [33mrole[39m=[32m"banner"[39m
        [36m>[39m
          [36m<h2>[39m
            [0mComments[0m
          [36m</h2>[39m
        [36m</header>[39m
        [36m<div[39m
          [33mclass[39m=[32m"inline-error"[39m
          [33mrole[39m=[32m"alert"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"error-content"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"error-icon-small"[39m
            [36m>[39m
              [0m⚠️[0m
            [36m</span>[39m
            [36m<span[39m
              [33mclass[39m=[32m"error-message-small"[39m
            [36m>[39m
              [0mServer error occurred. Please try again in a few moments.[0m
            [36m</span>[39m
            [36m<button[39m
              [33maria-label[39m=[32m"Dismiss error"[39m
              [33mclass[39m=[32m"error-dismiss"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0m×[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"comment-filters"[39m
        [36m>[39m
          [36m<button[39m
            [33maria-label[39m=[32m"All Comments"[39m
            [33mclass[39m=[32m"active"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mAll Comments[0m
          [36m</button>[39m
          [36m<button[39m
            [33maria-label[39m=[32m"Open Comments"[39m
            [33mclass[39m=[32m""[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mOpen Comments[0m
          [36m</button>[39m
          [36m<button[39m
            [33maria-label[39m=[32m"Resolved Comments"[39m
            [33mclass[39m=[32m""[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mResolved Comments[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"comments-list"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"empty-state"[39m
        [36m>[39m
          [36m<p>[39m
            [0mNo comments yet.[0m
          [36m</p>[39m
          [36m<p>[39m
            [0mSelect text to add a comment.[0m
          [36m</p>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</aside>[39m
  [36m</div>[39m
[36m</body>[39m...

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<aside[39m
        [33maria-label[39m=[32m"Comments Sidebar"[39m
        [33mclass[39m=[32m"comments-sidebar"[39m
        [33mrole[39m=[32m"complementary"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"comments-sticky-header"[39m
        [36m>[39m
          [36m<header[39m
            [33maria-label[39m=[32m"Comments Header"[39m
            [33mrole[39m=[32m"banner"[39m
          [36m>[39m
            [36m<h2>[39m
              [0mComments[0m
            [36m</h2>[39m
          [36m</header>[39m
          [36m<div[39m
            [33mclass[39m=[32m"inline-error"[39m
            [33mrole[39m=[32m"alert"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"error-content"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"error-icon-small"[39m
              [36m>[39m
                [0m⚠️[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"error-message-small"[39m
              [36m>[39m
                [0mServer error occurred. Please try again in a few moments.[0m
              [36m</span>[39m
              [36m<button[39m
                [33maria-label[39m=[32m"Dismiss error"[39m
                [33mclass[39m=[32m"error-dismiss"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
                [0m×[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"comment-filters"[39m
          [36m>[39m
            [36m<button[39m
              [33maria-label[39m=[32m"All Comments"[39m
              [33mclass[39m=[32m"active"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mAll Comments[0m
            [36m</button>[39m
            [36m<button[39m
              [33maria-label[39m=[32m"Open Comments"[39m
              [33mclass[39m=[32m""[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mOpen Comments[0m
            [36m</button>[39m
            [36m<button[39m
              [33maria-label[39m=[32m"Resolved Comments"[39m
              [33mclass[39m=[32m""[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mResolved Comments[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"comments-list"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"empty-state"[39m
          [36m>[39m
            [36m<p>[39m
              [0mNo comments yet.[0m
            [36m</p>[39m
            [36m<p>[39m
              [0mSelect text to add a comment.[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</aside>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m...
 ❯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 ❯ src/components/comments/CommentSidebar.test.tsx:390:13
    388|       render(<CommentSidebar scriptId="script-1" />);
    389| 
    390|       await waitFor(() => {
       |             ^
    391|         expect(screen.getByRole('alert')).toBeInTheDocument();
    392|         expect(screen.getByText(/error loading comments/i)).toBeInTheD…

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[79/80]⎯


 Test Files  11 failed | 34 passed | 2 skipped (47)
      Tests  78 failed | 324 passed | 61 skipped (463)
   Start at  03:29:05
   Duration  78.58s (transform 489ms, setup 3.31s, collect 1.31s, tests 175.07s, environment 7.79s, prepare 1.18s)

